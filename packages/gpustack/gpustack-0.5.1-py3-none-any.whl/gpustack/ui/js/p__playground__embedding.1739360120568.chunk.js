"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3856],{16204:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(26068),i=t.n(r),a=t(48305),l=t.n(a),s=t(67825),o=t.n(s),c=t(43943),u=t(23333),d=t(76808),f=t(32699),p=t(50959),m=t(38780),h=t(11527),v=function(e){var n=e.isOverflowing,t=e.showTitle,r=e.title,i=e.children,a=(0,m.Z)().initialize,l=p.useRef(null);return p.useEffect((function(){l.current&&a(l.current)}),[a,l.current]),(0,h.jsx)("div",{style:{maxHeight:200,overflowY:"auto"},ref:l,children:(0,h.jsx)("div",{style:{width:"max-content",maxWidth:250,paddingInline:10},children:n||t?r||i:""})})},x=p.memo(v),g=["children","maxWidth","minWidth","ghost","title","showTitle","tooltipProps"],b=function(e){var n=e.children,t=e.maxWidth,r=void 0===t?"100%":t,a=e.minWidth,s=e.ghost,m=void 0!==s&&s,v=e.title,b=e.showTitle,y=void 0!==b&&b,j=e.tooltipProps,w=o()(e,g),N=(0,p.useRef)(null),C=(0,p.useState)(!1),S=l()(C,2),Z=S[0],k=S[1],z=(0,p.useCallback)((function(){if(N.current){var e=N.current,n=e.scrollWidth,t=e.clientWidth;k(n>t)}}),[N.current]);(0,p.useEffect)((function(){var e=N.current;if(e){var n=new ResizeObserver((function(){z()}));return n.observe(e),z(),function(){return n.disconnect()}}}),[z]),(0,p.useEffect)((function(){var e=(0,f.throttle)(z,200);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e),e.cancel()}}),[z]),(0,p.useEffect)((function(){z()}),[n,z]);var M=(0,p.useMemo)((function(){return i()({maxWidth:r,minWidth:a,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},w.style)}),[r,w.style]);return(0,h.jsx)(u.Z,i()(i()({overlayInnerStyle:{paddingInline:0},destroyTooltipOnHide:!1,title:Z||y?(0,h.jsx)(x,{isOverflowing:Z,title:v,showTitle:y,children:n}):""},j),{},{children:m?(0,h.jsx)("div",{ref:N,style:M,"data-overflow":Z,children:n}):(0,h.jsx)(d.Z,i()(i()({},w),{},{ref:N,style:i()(i()({},M),{},{paddingInline:w.closable?"8px 22px":8,borderRadius:12}),closeIcon:!!w.closable&&(0,h.jsx)(c.Z,{style:{position:"absolute",right:8,top:8}}),children:n}))}))},y=p.memo(b)},13636:function(e,n,t){t.d(n,{Z:function(){return C}});var r=t(32699),i=t(50959),a=t(16222),l=t(13916),s=t(25620),o=t(953),c=t(4853),u=t(22241),d=t(99182),f=t(2177),p=t(19090),m=t(8725),h=t(62493),v=t(56031),x=t(7119),g=t(56262),b=t(83616),y=t(19175);v.D([c.N,u.N,d.N,f.N,p.N,m.N,h.N,a.N,l.N,s.N,o.N,g.T,b.z,y.N]);var j=x,w=t(11527),N=(0,i.forwardRef)((function(e,n){var t=e.options,a=e.width,l=e.height,s=(0,i.useRef)(null),o=(0,i.useRef)(),c=(0,i.useRef)(!1),u=(0,i.useRef)();(0,i.useImperativeHandle)(n,(function(){return{chart:o.current}}));var d=(0,i.useCallback)((function(){var e;s.current&&(null===(e=o.current)||void 0===e||e.clear(),o.current=j.init(s.current))}),[]),f=(0,i.useCallback)((function(){var e;null===(e=o.current)||void 0===e||e.resize()}),[]),p=(0,i.useCallback)((function(e){var n,t;null===(n=o.current)||void 0===n||n.clear(),null===(t=o.current)||void 0===t||t.setOption(e,{notMerge:!0,lazyUpdate:!0})}),[]);return(0,i.useEffect)((function(){return s.current&&d(),function(){var e;null===(e=o.current)||void 0===e||e.dispose()}}),[d]),(0,i.useEffect)((function(){c.current=!1,f(),p(t),c.current=!0}),[t]),(0,i.useEffect)((function(){var e=(0,r.throttle)((function(){var e;c.current&&(null===(e=o.current)||void 0===e||e.resize())}),100);return s.current&&(u.current=new ResizeObserver(e),u.current.observe(s.current)),function(){var e;s.current&&(null===(e=u.current)||void 0===e||e.unobserve(s.current))}}),[]),(0,w.jsx)("div",{className:"chart-wrapper",style:{width:a,height:l},children:(0,w.jsx)("div",{ref:s,style:{width:a,height:l}})})})),C=N},29220:function(e,n,t){t.d(n,{Gl:function(){return o},Md:function(){return a},Rf:function(){return c},TN:function(){return u},eC:function(){return l},j3:function(){return s},tN:function(){return d},yy:function(){return p},zt:function(){return f}});var r=t(32699),i="rgba(0, 0, 0, 0.4)",a={trigger:"axis",formatter:function(e,n){var t='<span class="tooltip-x-name">'.concat(e[0].axisValue,"</span>");return e.forEach((function(e){var i=(0,r.isFunction)(n)?null==n?void 0:n(e.data.value):e.data.value;t+='<span class="tooltip-item">\n     <span class="tooltip-item-name">\n       <span style="display:inline-block;margin-right:5px;border-radius:8px;width:8px;height:8px;background-color:'.concat(e.color,';"></span>\n       <span class="tooltip-title">').concat(e.seriesName,'</span>:\n     </span>\n      <span class="tooltip-value">').concat(i,"</span>\n      </span>")})),'<div class="tooltip-wrapper">'.concat(t,"</div>")}},l={left:0,right:20,bottom:20,containLabel:!0},s={itemWidth:8,itemHeight:8},o={type:"category",axisTick:{show:!0,lineStyle:{color:"rgba(217,217,217,0.5)"}},axisLabel:{color:i,fontSize:12},axisLine:{show:!1}},c={nameTextStyle:{padding:[0,0,0,-20]},splitLine:{show:!0,lineStyle:{type:"dashed"}},axisLabel:{color:i,fontSize:12},axisTick:{show:!1},type:"value"},u={show:!0,left:"center",textStyle:{fontSize:12,color:"#000"},text:""},d={type:"bar",barMaxWidth:20,barMinWidth:8,barGap:"30%",barCategoryGap:"50%"},f={type:"line",smooth:!0,showSymbol:!1,itemStyle:{},lineStyle:{width:1.5,opacity:.7}},p={type:"gauge",radius:"88%",center:["50%","65%"],startAngle:190,endAngle:-10,min:0,max:100,splitNumber:5,progress:{show:!0,roundCap:!1,width:12},pointer:{length:"80%",width:4,itemStyle:{color:"auto"}},axisLine:{roundCap:!1,lineStyle:{width:12,color:[[.5,"rgba(84, 204, 152, 80%)"],[.8,"rgba(250, 173, 20, 80%)"],[1,"rgba(255, 77, 79, 80%)"]]}},axisTick:{distance:-12,length:6,splitNumber:5,lineStyle:{width:1.5,color:"rgba(255, 255, 255, 1)"}},splitLine:{distance:-12,length:12,lineStyle:{width:1.5,color:"rgba(255, 255, 255, 1)"}},axisLabel:{distance:14,color:"rgba(0, 0, 0, .5)",fontSize:12},detail:{lineHeight:40,height:40,offsetCenter:[5,30],valueAnimation:!1,fontSize:20,color:"rgba(0, 0, 0, 0.88)",formatter:function(e){return"{value|"+e+"}{unit|%}"},rich:{value:{fontSize:16,fontWeight:"500",color:"rgba(0, 0, 0, 0.88)"},unit:{fontSize:14,color:"rgba(0, 0, 0, 0.88)",fontWeight:"500",padding:[0,0,0,2]}}}}},30396:function(e,n,t){var r=t(23010),i=(t(50959),t(11527));n.Z=function(e){var n=e.height,t=e.title;return(0,i.jsxs)("div",{style:{width:"100%",height:n||"100%"},className:"flex-center  flex-column ",children:[t&&(0,i.jsx)("h3",{className:"justify-center font-size-12",style:{padding:"4px 0",marginBottom:0},children:t}),(0,i.jsx)("div",{className:"flex-center justify-center flex-column",style:{height:"100%"},children:(0,i.jsx)(r.Z,{image:r.Z.PRESENTED_IMAGE_SIMPLE})})]})}},4286:function(e,n,t){t.r(n),t.d(n,{default:function(){return de}});var r=t(90228),i=t.n(r),a=t(87999),l=t.n(a),s=t(48305),o=t.n(s),c=t(49280),u=t(82344),d=t(57989),f=t(67581),p=t(35374),m=t(54235),h=t(85885),v=t(82187),x=t.n(v),g=t(32699),b=t.n(g),y=t(50959),j=t(94299),w=t(91082),N=t(15558),C=t.n(N),S=t(26068),Z=t.n(S),k=t(58573),z=t(13636),M=t(29220),R=t(30396),P=t(11527),T={animation:!1,grid:Z()(Z()({},M.eC),{},{right:10,top:10,bottom:2,left:2,containLabel:!0,borderRadius:4}),xAxis:{min:-1,max:1,scale:!1,slient:!0,splitNumber:15,splitLine:{lineStyle:{color:"#F2F2F2"}},axisLine:{show:!0,lineStyle:{color:"#DCDCDC"}},axisTick:{show:!1},axisLabel:{show:!0},boundaryGap:[.05,.05]},yAxis:{min:-1,max:1,scale:!1,slient:!0,splitNumber:10,boundaryGap:[.05,.05],splitLine:{lineStyle:{color:"#F2F2F2"}},axisLine:{show:!0,lineStyle:{color:"#DCDCDC"}},axisTick:{show:!1},axisLabel:{show:!0}},symbol:"roundRect",label:{show:!0,shadowColor:"none",textBorderColor:"none",formatter:function(e){return e.name}},series:[]},I=function(e){var n=e.seriesData,t=e.xAxisData,r=e.height,i=e.width,a=e.showEmpty,l=e.title,s=(0,y.useRef)(null),c=(0,y.useCallback)((function(e,n){for(var t,r=[],i=null===(t=s.current.chart)||void 0===t?void 0:t.convertToPixel("grid",n.value),a=o()(i,2),l=a[0],c=a[1],u=e.map((function(e){var n;return Z()(Z()({},e),{},{value:null===(n=s.current.chart)||void 0===n?void 0:n.convertToPixel("grid",e.value)})})),d=0;d<u.length;d++)if(n.name!==u[d].name){var f=o()(u[d].value,2),p=f[0],m=f[1];Math.sqrt(Math.pow(b().round(p-l,2),2)+Math.pow(b().round(m-c,2),2))<=16&&r.push(Z()({},u[d]))}else r.push(Z()({},u[d]));return r}),[]),u=(0,y.useCallback)((function(e){if(!e.length||e.length<2)return null;return function(e){var n;return'<span class="tooltip-item-name">\n               <span style="display:flex;justify-content:center;align-items: center;color:#fff;\n               margin-right:0;border-radius:4px;width:14px;\n               height:14px;background-color:'.concat(null==e||null===(n=e.itemStyle)||void 0===n?void 0:n.color,';"\n               >').concat(e.name,"</span>\n             </span>")}}),[]),d=(0,y.useMemo)((function(){var e=n.map((function(e,n){return Z()(Z()({},e),{},{itemStyle:{color:"#5470c6"},symbolSize:16})}));return Z()(Z()({},T),{},{tooltip:{trigger:"item",borderWidth:0,formatter:function(n,t){var r=c(e,n.data),i="",a=u(r);return r.forEach((function(e){i+='\n            <span class="tooltip-item" style="justify-content: flex-start;">\n             '.concat(a?a(e):"",'\n             <span class="tooltip-value">').concat(e.text,"</span>\n            </span>")})),'<div class="tooltip-wrapper">'.concat(i,"</div>")}},title:Z()(Z()({},M.TN),{},{text:l}),series:{type:"scatter",labelLayout:{hideOverlap:!0},data:e}})}),[n,t,l,c]);return(0,P.jsx)(P.Fragment,{children:!n.length&&a?(0,P.jsx)(R.Z,{height:r,title:l}):(0,P.jsx)(z.Z,{ref:s,height:r,options:d,width:i||"100%"})})},L=(0,y.memo)(I),E=t(43585),A=t(90343),D=t(38780),_=t(59995),O=t(4423),W=t(19019),G=t(51076),H=t(77353),U=t(66668),F=t(23333),K=t(83603),Y=t(96938),B=t(54876),V=t(47946),J=t(68476),q=t(98227),$=(t(99951),t(2139)),Q=(t(29031),t(32314),t(39616)),X=t(13311),ee=t(16204),ne=t(25906),te=t(69070),re=function(e){var n=e.textListCount,t=e.fileList,r=e.ghost,i=e.showIcon,a=void 0===i||i,l=e.onDelete,s=(0,p.useIntl)();return(0,P.jsx)("div",{className:"file-list",children:t.map((function(e,t){return(0,P.jsxs)("div",{className:x()("file-item",{ghost:r}),children:[(0,P.jsxs)("span",{className:"title",children:[(0,P.jsxs)("span",{className:"m-r-5",children:[t+1+n,"."]}),a&&(0,P.jsx)(ne.Z,{className:"m-r-5"}),(0,P.jsxs)(ee.Z,{ghost:!0,children:[" ",e.name]})]}),l&&(0,P.jsx)(F.Z,{title:s.formatMessage({id:"common.button.delete"}),children:(0,P.jsx)(h.ZP,{danger:!0,size:"small",type:"text",className:"delete-btn",icon:(0,P.jsx)(te.Z,{}),onClick:function(){return l(e.uid)}})})]},e.uid)}))})},ie=y.memo(re),ae=t(63057),le=t(91860),se=[],oe={},ce=(0,y.forwardRef)((function(e,n){var t=e.modelList,r=(0,y.useRef)(0),a=(0,p.useIntl)(),s=(0,_.Z)(),d=(0,p.useSearchParams)(),f=o()(d,1)[0].get("model")||"",m=(0,y.useState)({}),v=o()(m,2),g=v[0],N=v[1],S=(0,y.useState)(!1),z=o()(S,2),M=z[0],R=z[1],T=(0,y.useState)(!1),I=o()(T,2),ee=I[0],ne=I[1],te=(0,y.useState)(null),re=o()(te,2),ce=re[0],ue=re[1],de=(0,y.useState)(!1),fe=o()(de,2),pe=fe[0],me=fe[1],he=(0,y.useRef)(""),ve=(0,y.useRef)(null),xe=(0,y.useRef)(null),ge=(0,y.useRef)(null),be=(0,y.useRef)(0),ye=(0,y.useRef)(null),je=(0,y.useState)([]),we=o()(je,2),Ne=we[0],Ce=we[1],Se=(0,y.useState)("chart"),Ze=o()(Se,2),ke=Ze[0],ze=Ze[1],Me=(0,y.useState)(180),Re=o()(Me,2),Pe=Re[0],Te=Re[1],Ie=(0,y.useState)({code:"",copyValue:""}),Le=o()(Ie,2),Ee=Le[0],Ae=Le[1],De=(0,y.useState)(!1),_e=o()(De,2),Oe=_e[0],We=_e[1],Ge=(0,y.useRef)(!0),He=(0,y.useRef)(null),Ue=(0,y.useState)({}),Fe=o()(Ue,2),Ke=Fe[0],Ye=Fe[1],Be=(0,y.useState)([{text:"",uid:-1,name:""},{text:"",uid:-2,name:""}]),Ve=o()(Be,2),Je=Ve[0],qe=Ve[1],$e=(0,y.useState)([]),Qe=o()($e,2),Xe=Qe[0],en=Qe[1],nn=(0,y.useRef)(null),tn=(0,D.Z)(),rn=tn.initialize,an=tn.updateScrollerPosition,ln=(0,D.Z)(),sn=ln.initialize,on=(ln.updateScrollerPosition,(0,y.useRef)(null));(0,y.useImperativeHandle)(n,(function(){return{viewCode:function(){R(!0)},setCollapse:function(){me(!pe)}}}));var cn=(0,y.useMemo)((function(){return function(e){var n=e.api,t=e.parameters,r=window.location.origin,i="\ncurl ".concat(r).concat(n,' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ${YOUR_GPUSTACK_API_KEY}" \\\n').concat((0,Q.Yy)(t,!1)).trim(),a='\nfrom openai import OpenAI\n\nclient = OpenAI(\n  base_url="'.concat(r,'/v1-openai", \n  api_key="YOUR_GPUSTACK_API_KEY"\n)\n\nresponse = client.embeddings.create(\n').concat((0,Q.G4)(Z()({},t)),")\n\nprint(response.data[0].embedding)").trim(),l=(0,Q.GT)(Z()({},t));return{curlCode:i,pythonCode:a,nodeJsCode:'\nconst OpenAI = require("openai");\n\nconst openai = new OpenAI({\n  "apiKey": "YOUR_GPUSTACK_API_KEY",\n  "baseURL": "'.concat(r,'/v1-openai"\n});\n\nasync function main() {\n  const params = ').concat(l,"; \n  const response = await openai.embeddings.create(params);\n  console.log(response.data[0].embedding);\n}\nmain();").trim()}}({api:"/v1-openai/embeddings",parameters:Z()(Z()({},g),{},{input:[].concat(C()(Je.map((function(e){return e.text})).filter((function(e){return e}))),C()(Ne.map((function(e){return e.text})).filter((function(e){return e}))))})})}),[g,Je,Ne]),un=(0,y.useMemo)((function(){return[].concat(C()(Je),C()(Ne)).length<2}),[Je,Ne]),dn=(0,y.useCallback)((function(e){try{var n=e.map((function(e){return e.embedding})),t=new q._(n).predict(n,{nComponents:2}).to2DArray(),r=[].concat(C()(Je.map((function(e){return e.text})).filter((function(e){return e}))),C()(Ne.map((function(e){return e.text})).filter((function(e){return e})))),i=t.map((function(e,n){return{value:e,name:n+1,text:r[n]}}));en(i);var a=e.map((function(e,n){var t=b().cloneDeep(e);return t.embedding=t.embedding.slice(0,5),t.embedding.push(null),t}));Ae({code:JSON.stringify(a,null,2).replace(/null/g,"..."),copyValue:JSON.stringify(e,null,2)})}catch(e){}}),[Je,Ne]),fn=function(){r.current=r.current+1},pn=function(){var e=l()(i()().mark((function e(n){var t,r,a,l,o,c,u,d,f;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=on.current)||void 0===t?void 0:t.form.validateFields();case 2:if(g.model){e.next=4;break}return e.abrupt("return");case 4:if(e.prev=4,l=Je.filter((function(e){return e.text})),o=Ne.filter((function(e){return e.text})),!((c=[].concat(C()(l.map((function(e){return e.text}))),C()(o.map((function(e){return e.text}))))).length<2)){e.next=11;break}return We(!0),e.abrupt("return");case 11:return qe(l),Ce(o),We(!1),ne(!0),fn(),ue(null),null===(r=ye.current)||void 0===r||null===(a=r.cancel)||void 0===a||a.call(r),ye.current=s(),he.current=(null==n?void 0:n.content)||"",e.next=22,(0,w.xO)({model:g.model,encoding_format:"float",input:c},{token:ye.current.token});case 22:u=e.sent,ue(u.usage),d=u.data||[],dn(d),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(4),ue({error:!0,errorMessage:null===(f=e.t0.response)||void 0===f||null===(f=f.data)||void 0===f||null===(f=f.error)||void 0===f?void 0:f.message});case 31:return e.prev=31,ne(!1),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[4,28,31,34]])})));return function(n){return e.apply(this,arguments)}}(),mn=function(){pn()},hn=(0,y.useCallback)((function(e){He.current=e}),[]),vn=(0,y.useCallback)((function(e,n){if(Ge.current){var t=e.clipboardData.getData("text");if(t){Je[n].text;var r,i,a=t.split("\n").map((function(e){var n;return{text:null==e?void 0:e.trim(),uid:null===(n=xe.current)||void 0===n?void 0:n.setMessageId(),name:""}}));a[0].text="".concat((null===(r=He.current)||void 0===r?void 0:r.beforeText)||"").concat(a[0].text).concat((null===(i=He.current)||void 0===i?void 0:i.afterText)||"");var l=[].concat(C()(Je.slice(0,n)),C()(a),C()(Je.slice(n+1))).filter((function(e){return e.text})).map((function(e,n){var t;return Z()(Z()({},e),{},{uid:null===(t=xe.current)||void 0===t?void 0:t.setMessageId()})}));qe(l)}}}),[Je]),xn=(0,y.useMemo)((function(){return[{key:"chart",label:"Chart",children:(0,P.jsx)(L,{seriesData:Xe,height:Pe,width:"100%",xAxisData:[]})},{key:"json",label:"JSON",children:(0,P.jsx)("div",{style:{padding:10,backgroundColor:"#fafafa"},children:(0,P.jsx)(E.Z,{height:Pe-20,theme:"light",code:Ee.code,copyValue:Ee.copyValue,lang:"json",copyable:!0,style:{marginBottom:0}})})}]}),[Pe,Xe,Ee]);return(0,y.useEffect)((function(){fn(),en([]),ue(null)}),[g.model]),(0,j.y1)(u.ZP.SUBMIT,(function(e){e.preventDefault(),mn()}),{enabled:!ee,preventDefault:!0}),(0,y.useEffect)((function(){ve.current&&rn(ve.current)}),[ve.current,rn]),(0,y.useEffect)((function(){ge.current&&sn(ge.current)}),[ge.current,sn]),(0,y.useEffect)((function(){Je.length+Ne.length>be.current&&an(),be.current=Je.length+Ne.length}),[Je.length,Ne.length]),(0,P.jsxs)("div",{className:"ground-left-wrapper rerank",children:[(0,P.jsxs)("div",{className:"ground-left",children:[(0,P.jsx)("div",{className:"center",ref:ve,style:{height:"auto",maxHeight:"100%"},children:(0,P.jsxs)("div",{className:"documents",children:[(0,P.jsxs)("div",{className:"flex-between m-b-8 doc-header",children:[(0,P.jsx)("h3",{className:"m-l-10 flex-between flex-center font-size-14 line-24 m-b-0",children:(0,P.jsx)("div",{className:"flex gap-20",children:(0,P.jsx)("span",{children:a.formatMessage({id:"playground.embedding.documents"})})})}),(0,P.jsxs)("div",{className:"flex-center gap-10",children:[(0,P.jsx)(F.Z,{title:a.formatMessage({id:"playground.input.multiplePaste.tips"}),children:(0,P.jsxs)(K.Z,{defaultChecked:Ge.current,onChange:function(e){Ge.current=e.target.checked},children:[a.formatMessage({id:"playground.input.multiplePaste"}),(0,P.jsx)(O.Z,{className:"m-l-4"})]})}),(0,P.jsxs)(h.ZP,{size:"middle",onClick:function(){var e;null===(e=xe.current)||void 0===e||e.handleAdd()},children:[(0,P.jsx)(W.Z,{}),a.formatMessage({id:"playground.embedding.addtext"})]}),(0,P.jsx)(h.ZP,{icon:(0,P.jsx)(G.Z,{}),size:"middle",onClick:function(){qe([{text:"",uid:-1,name:""},{text:"",uid:-2,name:""}]),Ce([]),en([]),ue(null),We(!1),Ae({code:"",copyValue:""})},children:a.formatMessage({id:"common.button.clear"})}),ee?(0,P.jsx)(F.Z,{title:a.formatMessage({id:"common.button.stop"}),children:(0,P.jsx)(h.ZP,{style:{width:60},size:"middle",type:"primary",onClick:function(){var e,n;null===(e=ye.current)||void 0===e||null===(n=e.cancel)||void 0===n||n.call(e),ne(!1)},icon:(0,P.jsx)(c.Z,{type:"icon-stop1",className:"font-size-12"})})}):(0,P.jsx)(F.Z,{title:(0,P.jsxs)("span",{children:["[",u.d4.SUBMIT.textKeybinding,"]"," ",a.formatMessage({id:"common.button.submit"})]}),children:(0,P.jsx)(h.ZP,{size:"middle",type:"primary",disabled:un,onClick:mn,icon:(0,P.jsx)(H.Z,{rotate:0,className:"font-size-14"}),style:{width:60}})})]})]}),(0,P.jsxs)("div",{className:"docs-wrapper",children:[(0,P.jsx)(ae.Z,{ref:xe,textList:Je,onChange:function(e){qe(e)},onSelect:hn,onPaste:vn}),(0,P.jsx)("div",{style:{marginTop:8},children:(0,P.jsx)(ie,{fileList:Ne,textListCount:Je.length||0,onDelete:function(e){Ce((function(n){return n.filter((function(n){return n.uid!==e}))}))}})}),Oe&&(0,P.jsx)(k.Z,{type:"danger",message:a.formatMessage({id:"playground.documents.verify.embedding"})})]})]})}),(0,P.jsxs)("div",{className:"ground-left-footer",style:{width:"100%",padding:"0 32px 16px"},children:[(0,P.jsxs)("h3",{className:"m-l-10 flex-between flex-center font-size-14 line-24 m-b-16",children:[(0,P.jsxs)("div",{className:"flex gap-20",children:[(0,P.jsxs)("span",{className:"flex-center",children:[a.formatMessage({id:"playground.embedding.output"}),(0,P.jsx)(F.Z,{title:(0,P.jsxs)("span",{className:"flex-column",children:[(0,P.jsxs)("span",{children:["1.",a.formatMessage({id:"playground.embedding.pcatips1"})]}),(0,P.jsxs)("span",{children:["2."," ",a.formatMessage({id:"playground.embedding.pcatips2"})]})]}),children:(0,P.jsx)(O.Z,{className:"m-l-4"})})]}),(0,P.jsx)(k.Z,{type:"danger",message:null==ce?void 0:ce.errorMessage})]}),(0,P.jsx)(Y.Z,{onChange:function(e){ze(e)},value:ke,options:[{label:a.formatMessage({id:"playground.embedding.chart"}),value:"chart"},{label:"JSON",value:"json"}]})]}),(0,P.jsxs)("div",{className:"embed-chart",children:[ee&&(0,P.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,P.jsx)(B.Z,{spinning:!0})}),(0,P.jsx)($.e,{ref:nn,enable:{top:!0},defaultSize:{height:180},handleComponent:{top:(0,P.jsx)(F.Z,{title:a.formatMessage({id:"playground.embedding.handler.tips"}),children:(0,P.jsx)(h.ZP,{size:"small",className:"drag-handler",color:"default",variant:"filled",icon:(0,P.jsx)(U.Z,{rotate:90,style:{fontSize:"var(--font-size-14)"}})})})},maxHeight:400,minHeight:180,onResize:function(){var e,n=null===(e=nn.current)||void 0===e||null===(e=e.state)||void 0===e?void 0:e.height;n&&Te(n)},onResizeStop:function(e,n,t,r){r.height+Pe<=400&&r.height+Pe>=180&&Te(r.height+Pe)},children:(0,P.jsx)("div",{style:{border:"1px solid var(--ant-color-border)",borderRadius:"var(--border-radius-base)",width:"100%"},className:"scatter ",children:(0,P.jsx)(V.Z,{defaultActiveKey:ke,activeKey:ke,centered:!0,renderTabBar:function(){return(0,P.jsx)(P.Fragment,{})},items:xn})})})]})]})]}),(0,P.jsx)("div",{className:x()("params-wrapper",{collapsed:pe}),ref:ge,children:(0,P.jsx)("div",{className:"box",children:(0,P.jsx)(X.Z,{ref:on,onModelChange:function(e){var n=t.find((function(n){return n.value===e}));n&&Ye(n.meta||{})},setParams:N,paramsConfig:se,initialValues:oe,params:g,selectedModel:f,modelList:t,extra:(null==Ke?void 0:Ke.n_ctx)&&(null==Ke?void 0:Ke.n_slot)&&(0,P.jsx)(J.Z.Item,{children:(0,P.jsx)(A.Z,{disabled:!0,label:"Max Tokens",value:b().divide(null==Ke?void 0:Ke.n_ctx,null==Ke?void 0:Ke.n_slot)})})})})}),(0,P.jsx)(le.Z,{open:M,viewCodeContent:cn,onCancel:function(){R(!1)},title:a.formatMessage({id:"playground.viewcode"})})]})})),ue=(0,y.memo)(ce),de=(t(64232),function(){var e=(0,p.useIntl)(),n=(0,y.useRef)(null),t=(0,y.useRef)(null),r=(0,y.useState)([]),a=o()(r,2),s=a[0],v=a[1],g=(0,y.useState)(!1),N=o()(g,2),C=N[0],S=N[1],Z=(0,y.useCallback)((function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.viewCode)||void 0===n||n.call(e)}),[t.current]),k=(0,y.useCallback)((function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.setCollapse)||void 0===n||n.call(e)}),[t.current]);(0,y.useEffect)((function(){var e=function(){var e=l()(i()().mark((function e(){var n,t,r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={categories:d.Us.embedding,with_meta:!0},e.next=4,(0,w.nb)(n);case 4:return t=e.sent,r=b().map(t.data||[],(function(e){return{value:e.id,label:e.id,meta:e.meta}})),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var n=l()(i()().mark((function n(){var t,r,a;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Promise.all([e()]);case 3:t=n.sent,r=o()(t,1),a=r[0],v(a),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),S(!0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}}();n()}),[]);return(0,j.y1)(u.ZP.RIGHT.join(","),(function(){var e,t;null===(e=n.current)||void 0===e||null===(t=e.setCollapse)||void 0===t||t.call(e)}),{preventDefault:!0}),(0,P.jsx)(f._z,{ghost:!0,header:{title:e.formatMessage({id:"menu.playground.embedding"}),breadcrumb:{}},extra:(0,P.jsxs)(m.Z,{children:[(0,P.jsx)(h.ZP,{size:"middle",onClick:Z,icon:(0,P.jsx)(c.Z,{type:"icon-code",className:"font-size-16"}),children:e.formatMessage({id:"playground.viewcode"})}),(0,P.jsx)(h.ZP,{size:"middle",onClick:k,icon:(0,P.jsx)(c.Z,{type:"icon-a-layout6-line",className:"font-size-16"})})]},"buttons"),className:x()("playground-container chat"),children:(0,P.jsx)("div",{className:"play-ground",children:(0,P.jsx)("div",{className:"chat",children:(0,P.jsx)(ue,{ref:t,modelList:s,loaded:C})})})})})}}]);