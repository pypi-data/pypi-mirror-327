function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./WdsDropdownMenu-N-JuCg1m.js","./index-BEZl8isL.js","./index-DCFl8Y0i.css","./WdsDropdownMenu-BWdTjq4P.css","./BaseDropdown-BzQ2P46q.js","./useFocusWithin-D9cSjn1O.js","./BaseDropdown-BDTgF1zj.css","./BuilderEmbeddedCodeEditor-BPXNlHcT.js","./BuilderEmbeddedCodeEditor-CBDIL25Y.css","./BuilderSettings-C5qYB46P.js","./instancePath-BsbOTTI8.js","./marked.esm-273vDTCT.js","./BuilderSettings-rkqQ7bSk.css","./BuilderSidebar-DsqFIu0i.js","./BuilderSidebar-W4OjNDKz.css","./ComponentRenderer-BhrKbn-H.js","./ComponentRenderer-Ck2UJegu.css","./BuilderInstanceTracker-ItqegQZP.js","./BuilderInstanceTracker-Bon7FUBi.css","./BuilderInsertionOverlay-BkFYq_8i.js","./BuilderInsertionOverlay-D2XS0ij9.css","./BuilderInsertionLabel-B8dnD-AQ.js","./BuilderInsertionLabel-_YS5WPfq.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{d as M,i as q,a as U,c as S,r as D,o as h,e as w,f,q as F,y as N,L as E,z as oe,A as se,_ as V,M as jt,b as I,N as y,t as L,m as T,n as A,W as ee,E as pe,s as te,x as Ce,T as yt,O as Ie,P as Ye,k as Fe,Q as Xe,l as Ze,v as gt,G as Me,R as De,S as qt,U as st,V as Ut,X as $e,w as _e,Y as Je,Z as lt,$ as re,a0 as ce,a1 as at,a2 as zt,a3 as Gt,a4 as Yt,a5 as Xt,a6 as be,a7 as de,K as ue,a8 as Zt,a9 as wt,aa as Le,ab as Jt,ac as Qt,ad as en,ae as tn,af as nn,ag as on,ah as sn,ai as ln,C as an,aj as rn,ak as cn,al as it}from"./index-BEZl8isL.js";import{u as dn}from"./useFocusWithin-D9cSjn1O.js";import{marked as un}from"./marked.esm-273vDTCT.js";const fn="data:image/svg+xml,%3csvg%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='48'%20height='48'%20rx='24'%20fill='black'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M34.0187%2028.9434L37.2255%2015.7128H32.7659L30.812%2015.7128L34.0187%2028.9434Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M25.4266%2015.7128H20.967L25.4266%2034.1126L27.4085%2034.1126H31.8681L27.4085%2015.7128H25.4266L25.4266%2015.7128Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M17.5635%2015.7129H13.1038L13.1039%2015.7132H11.1219L15.5816%2034.113H20.0413L20.0412%2034.1126H22.0231L17.5635%2015.7129Z'%20fill='white'/%3e%3c/svg%3e",Qe=e=>(oe("data-v-243c0a83"),e=e(),se(),e),pn={class:"BuilderSwitcher"},mn=Qe(()=>f("i",{class:"icon material-symbols-outlined"}," brush ",-1)),vn=Qe(()=>f("i",{class:"icon material-symbols-outlined"}," linked_services ",-1)),hn=Qe(()=>f("i",{class:"icon material-symbols-outlined"}," preview ",-1)),_n=M({__name:"BuilderSwitcher",setup(e){const t=q(U.core),n=q(U.builderManager),o=S(()=>t.featureFlags.value.includes("workflows"));let s=D(null);const i=c=>{const d=n.getMode();d!=c&&(s.value=c,n.setMode(c),(c=="preview"||d=="workflows"||c=="workflows")&&n.setSelection(null))},a=S(()=>n.getMode());return(c,d)=>(h(),w("div",pn,[f("div",{"data-automation-action":"set-mode-ui",class:N({active:a.value=="ui"}),onClick:d[0]||(d[0]=u=>i("ui"))},[mn,F(" UI ")],2),o.value?(h(),w("div",{key:0,"data-automation-action":"set-mode-workflows",class:N({active:a.value=="workflows"}),onClick:d[1]||(d[1]=u=>i("workflows"))},[vn,F(" Workflows ")],2)):E("",!0),f("div",{class:N({active:a.value=="preview"}),"data-automation-action":"set-mode-preview",onClick:d[2]||(d[2]=u=>i("preview"))},[hn,F(" Preview ")],2)]))}}),yn=V(_n,[["__scopeId","data-v-243c0a83"]]),gn=e=>(oe("data-v-6d3d54d5"),e=e(),se(),e),wn={class:"main"},bn={class:"titleContainer"},Sn={key:0,class:"material-symbols-outlined"},kn=gn(()=>f("i",{class:"material-symbols-outlined"},"close",-1)),Cn={class:"slotContainer"},$n={key:0,class:"actionContainer"},xn=M({__name:"BuilderModal",props:{modalTitle:{type:String,required:!0},icon:{type:String,required:!1,default:void 0},closeAction:{type:Object,required:!0},menuActions:{type:Array,required:!1,default:void 0},allowOverflow:{type:Boolean,required:!1}},setup(e){const t=e,{modalTitle:n,icon:o,closeAction:s,menuActions:i}=jt(t),a=c=>{c.key=="Escape"&&s.value.fn()};return(c,d)=>{var u,v;return h(),I(yt,{to:"#modal"},[f("div",{class:N(["BuilderModal",{"BuilderModal--overflow":e.allowOverflow}]),tabindex:"-1",onKeydown:a},[f("div",wn,[f("div",bn,[y(o)?(h(),w("i",Sn,L(y(o)),1)):E("",!0),f("h2",null,L(y(n)),1),T(ee,{variant:"neutral",size:"icon",title:((u=y(s))==null?void 0:u.desc)??"Close",onClick:y(s).fn},{default:A(()=>[kn]),_:1},8,["title","onClick"])]),f("div",Cn,[pe(c.$slots,"default",{},void 0,!0)]),((v=y(i))==null?void 0:v.length)>0?(h(),w("div",$n,[(h(!0),w(te,null,Ce(y(i),(p,r)=>(h(),I(ee,{key:r,variant:"primary",size:"small",onClick:p.fn},{default:A(()=>[F(L(p.desc),1)]),_:2},1032,["onClick"]))),128))])):E("",!0)])],34)])}}}),bt=V(xn,[["__scopeId","data-v-6d3d54d5"]]),Tn={class:"BuilderStateExplorer"},Bn=M({__name:"BuilderStateExplorer",setup(e){const t=q(U.core);return(n,o)=>(h(),w("div",Tn,[T(Ie,{data:y(t).userState.value,"enable-copy-to-json":!0,"initial-depth":1,"hide-root":!0},null,8,["data"])]))}}),Dn=V(Bn,[["__scopeId","data-v-eafb7b97"]]),Pe=e=>(oe("data-v-ebd71d45"),e=e(),se(),e),En={class:"BuilderHeader"},Pn=Pe(()=>f("img",{src:fn,alt:"Writer Framework logo"},null,-1)),An={class:"undoRedo"},Ln=["data-writer-tooltip","disabled"],In=Pe(()=>f("i",{class:"material-symbols-outlined"}," undo ",-1)),Rn=["data-writer-tooltip","disabled"],On=Pe(()=>f("i",{class:"material-symbols-outlined"}," redo ",-1)),Fn=Pe(()=>f("i",{class:"material-symbols-outlined"}," mystery ",-1)),Mn=Pe(()=>f("div",{class:"gap"},null,-1)),Vn=["title"],Wn={key:0},Nn=M({__name:"BuilderHeader",setup(e){const t=D(null),n=q(U.core),o=q(U.builderManager),{undo:s,redo:i,getUndoRedoSnapshot:a}=Ye(n,o),c=D(!1),d=S(()=>a()),u=()=>{let r="";switch(n.syncHealth.value){case"offline":r+="Offline. Not syncing.";break;case"connected":r+="Online. Syncing...";break;case"idle":r+="Sync not initialised.";break;case"suspended":r+="Sync suspended.";break}return n.featureFlags.value.length>0&&(r+=` Feature flags: ${n.featureFlags.value.join(", ")}`),r};function v(){c.value=!0}const p={desc:"Close",fn:()=>{c.value=!1}};return(r,l)=>(h(),w("div",En,[Pn,T(yn),f("div",An,[f("button",{class:"undo","data-writer-tooltip":d.value.isUndoAvailable?`Undo: ${d.value.undoDesc}`:"Nothing to undo",disabled:!d.value.isUndoAvailable,"data-writer-tooltip-placement":"bottom",onClick:l[0]||(l[0]=m=>y(s)())},[In,F(" Undo ")],8,Ln),f("button",{class:"redo","data-writer-tooltip":d.value.isRedoAvailable?`Redo: ${d.value.redoDesc}`:"Nothing to redo",disabled:!d.value.isRedoAvailable,"data-writer-tooltip-placement":"bottom",onClick:l[1]||(l[1]=m=>y(i)())},[On,F(" Redo ")],8,Rn)]),f("div",null,[f("button",{onClick:v},[Fn,F(" State Explorer ")]),c.value?(h(),I(bt,{key:0,"close-action":p,icon:"mystery","modal-title":"State Explorer"},{default:A(()=>[T(Dn)]),_:1})):E("",!0)]),Mn,f("div",{class:N(["syncHealth",y(n).syncHealth.value]),title:u()},[f("i",{ref_key:"syncHealthIcon",ref:t,class:"material-symbols-outlined icon"},"sync",512),y(n).syncHealth.value=="offline"?(h(),w("span",Wn,"Offline")):E("",!0)],10,Vn)]))}}),Hn=V(Nn,[["__scopeId","data-v-ebd71d45"]]),Kn={class:"text"},jn=200,qn=4,Un=M({__name:"BuilderTooltip",setup(e){const t=D(null),n=D(!1),o=D(null);let s=null,i=null;const a=D("top"),c=D({top:0,left:0});async function d(){if(!s||(o.value=s.dataset.writerTooltip,!o.value))return;const l=s.dataset.writerTooltipGap?parseInt(s.dataset.writerTooltipGap):qn;if(n.value=u(s),!n.value)return;await De();const{x:m,y:_,width:g,height:b}=s.getBoundingClientRect(),{width:k,height:$}=t.value.getBoundingClientRect();switch(a.value){case"top":c.value.top=_-$-l,c.value.left=m+g/2-k/2;break;case"right":c.value.top=_+b/2-$/2,c.value.left=m+g+l;break;case"left":c.value.left=m-k-l,c.value.top=_+b/2-$/2;break;case"bottom":c.value.top=_+b+l,c.value.left=m+g/2-k/2;break}}function u(l){return l.getAttribute("data-writer-tooltip-strategy")==="overflow"?l.scrollWidth>l.clientWidth:!0}function v(l){const _=l.target.closest("[data-writer-tooltip]");if(_)s!==_&&(n.value=!1);else{n.value=!1,s=null;return}s=_,a.value=s.dataset.writerTooltipPlacement??"top",setTimeout(()=>p(_),jn)}async function p(l){l===s&&(i==null||i.disconnect(),i=new MutationObserver(d),i.observe(s,{attributes:!0,attributeFilter:["data-writer-tooltip","data-writer-tooltip-placement","data-writer-tooltip-strategy"]}),d())}const r=S(()=>{const{top:l,left:m}=c.value;return{top:`${l}px`,left:`${m}px`}});return Fe(()=>{document.documentElement.addEventListener("mouseover",v)}),Xe(()=>{document.documentElement.removeEventListener("mouseover",v),i==null||i.disconnect()}),(l,m)=>Ze((h(),w("div",{ref_key:"rootEl",ref:t,class:"BuilderTooltip",style:Me(r.value)},[f("div",{class:N(["arrow",a.value])},null,2),f("div",Kn,L(o.value),1)],4)),[[gt,n.value]])}}),zn=V(Un,[["__scopeId","data-v-4662b676"]]),Gn={class:"BuilderAsyncLoader"},Yn=M({__name:"BuilderAsyncLoader",setup(e){return(t,n)=>(h(),w("div",Gn,[T(qt)]))}}),he=V(Yn,[["__scopeId","data-v-bb820549"]]),Xn={class:"BuilderPanel__collapser"},Zn={class:"material-symbols-outlined"},Jn={class:"BuilderPanel__title"},Qn={class:"BuilderPanel__titleCompanion"},eo=["data-order"],to={key:0,class:"BuilderPanel__contents__leftPanel"},no={class:"BuilderPanel__actions"},oo={class:"BuilderPanel__actionsCompanion"},so={class:"material-symbols-outlined"},lo={class:"BuilderPanel__mainContents"},ao=M({__name:"BuilderPanel",props:{panelId:{},name:{},actions:{},contentsTeleportEl:{},scrollable:{type:Boolean},keyboardShortcutKey:{},enableLeftPanel:{type:Boolean}},emits:{openned:e=>typeof e=="boolean"},setup(e,{emit:t}){const n=q(U.builderManager),o=["code","log"],s=e,i=t,a=S(()=>!n.openPanels.value.has(s.panelId)),c=S(()=>o.indexOf(s.panelId));function d(p){if(n.openPanels.value.has(p)){n.openPanels.value.delete(p),i("openned",!1);return}n.openPanels.value.add(p),i("openned",!0)}function u(p){const r=Ut(p);if(r&&p.key==s.keyboardShortcutKey.toLowerCase()){p.preventDefault(),d(s.panelId);return}s.actions.forEach(l=>{if(!l.keyboardShortcut)return;const{key:m,modifierKey:_}=l.keyboardShortcut;m.toLowerCase()==p.key&&(!r&&_||(p.preventDefault(),l.callback()))})}function v(p){if(!p)return"";let r=" (";return p.modifierKey&&(r+=st()),r+=p.key,r+=")",r}return Fe(async()=>{document.addEventListener("keydown",u)}),Xe(()=>{document.removeEventListener("keydown",u)}),(p,r)=>(h(),w("div",{class:N(["BuilderPanel",{collapsed:a.value}])},[f("div",Xn,[T(ee,{variant:"neutral",size:"smallIcon","data-automation-action":"toggle-panel","data-automation-key":p.panelId,"data-writer-tooltip":`Toggle ${p.name} (${y(st)()}${p.keyboardShortcutKey})`,onClick:r[0]||(r[0]=l=>d(p.panelId))},{default:A(()=>[f("i",Zn,L(a.value?"expand_less":"expand_more"),1)]),_:1},8,["data-automation-key","data-writer-tooltip"])]),f("div",Jn,L(p.name),1),f("div",Qn,[pe(p.$slots,"titleCompanion",{},void 0,!0)]),a.value?E("",!0):(h(),I(yt,{key:0,to:p.contentsTeleportEl},[f("div",{style:Me({order:c.value}),"data-order":c.value,class:N(["BuilderPanel__contents",{"BuilderPanel__contents--leftPanel":p.enableLeftPanel}])},[p.enableLeftPanel?(h(),w("div",to,[pe(p.$slots,"leftPanel",{},void 0,!0)])):E("",!0),f("div",no,[f("div",oo,[pe(p.$slots,"actionsCompanion",{},void 0,!0)]),(h(!0),w(te,null,Ce(p.actions,(l,m)=>(h(),I(ee,{key:m,"data-writer-tooltip":l.name+v(l.keyboardShortcut),"data-writer-tooltip-placement":"left",variant:"neutral",size:"smallIcon",disabled:l.isDisabled,onClick:l.callback},{default:A(()=>[f("i",so,L(l.icon),1)]),_:2},1032,["data-writer-tooltip","disabled","onClick"]))),128))]),f("div",lo,[pe(p.$slots,"default",{},void 0,!0)])],14,eo)],8,["to"]))],2))}}),St=V(ao,[["__scopeId","data-v-fd13c18b"]]);function io(e){const t=D(structuredClone($e(e.sourceFiles.value)));_e(e.sourceFiles,(l,m)=>{let _=!1,g=structuredClone($e(t.value));for(const b of lt(l)){const k=re(b,m),$=re(b,l);if(!ce($))continue;if(k===void 0){g=at(b,g,structuredClone($e($))),_=!0;continue}if(!ce(k)||!(!k.complete&&$.complete))continue;const B=re(b,g);ce(B)&&(_=!0,B.complete=!0,B.content=$.content)}for(const b of zt(g))re(b,l)===void 0&&(g=Gt(b,g),_=!0);_&&(t.value=g)});const n=Je(),o=S(()=>Array.from(lt(t.value))),s=S(()=>o.value.filter(l=>{const m=re(l,t.value);if(!ce(m))return!0;const _=re(l,e.sourceFiles.value);return ce(_)?!m.complete||!_.complete?!1:m.content!==_.content:!0})),i=S(()=>{if(n.value!==void 0)return re(n.value,t.value)}),a=S({get(){return ce(i.value)?i.value.content:""},set(l){if(n.value===void 0)return;const m=re(n.value,t.value);ce(m)&&(m.content=l)}});function c(l=1){const m=`new-file-${l}.txt`;return re([m],t.value)?c(l+1):m}async function d(){const l=c();t.value=at([l],$e(t.value)),p([l]),await e.sendCreateSourceFileRequest([l])}const u=S(()=>{var m;return(m=n.value)!=null&&m.length?n.value.at(-1).split(".").at(-1):""}),v=S(()=>{switch(u.value){case"py":return"python";case"md":case"markdown":return"markdown";default:return u.value}});function p(l){n.value=l,ce(i.value)&&!i.value.complete&&e.requestSourceFileLoading(l)}async function r(l){if(n.value&&(await e.sendCodeSaveRequest(a.value,n.value),l)){const m=[...$e(n.value)];n.value=void 0;try{await e.sendRenameSourceFileRequest(m,l)}catch(_){throw n.value=m,_}p(l)}}return{code:a,sourceFileDraft:t,filepathOpen:n,pathsUnsaved:s,openedFileLanguage:v,save:r,openFile:p,openNewFile:d,getNewFilename:c}}const ro=["top","right","bottom","left"],rt=["start","end"],ct=ro.reduce((e,t)=>e.concat(t,t+"-"+rt[0],t+"-"+rt[1]),[]),dt=Math.min,Be=Math.max,Re=Math.round,Q=e=>({x:e,y:e}),co={left:"right",right:"left",bottom:"top",top:"bottom"},uo={start:"end",end:"start"};function kt(e,t){return typeof e=="function"?e(t):e}function Ve(e){return e.split("-")[0]}function ye(e){return e.split("-")[1]}function fo(e){return e==="x"?"y":"x"}function Ct(e){return e==="y"?"height":"width"}function $t(e){return["top","bottom"].includes(Ve(e))?"y":"x"}function xt(e){return fo($t(e))}function po(e,t,n){n===void 0&&(n=!1);const o=ye(e),s=xt(e),i=Ct(s);let a=s==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=ut(a)),[a,ut(a)]}function mo(e){return e.replace(/start|end/g,t=>uo[t])}function ut(e){return e.replace(/left|right|bottom|top/g,t=>co[t])}function vo(e){return{top:0,right:0,bottom:0,left:0,...e}}function ho(e){return typeof e!="number"?vo(e):{top:e,right:e,bottom:e,left:e}}function Oe(e){const{x:t,y:n,width:o,height:s}=e;return{width:o,height:s,top:n,left:t,right:t+o,bottom:n+s,x:t,y:n}}function ft(e,t,n){let{reference:o,floating:s}=e;const i=$t(t),a=xt(t),c=Ct(a),d=Ve(t),u=i==="y",v=o.x+o.width/2-s.width/2,p=o.y+o.height/2-s.height/2,r=o[c]/2-s[c]/2;let l;switch(d){case"top":l={x:v,y:o.y-s.height};break;case"bottom":l={x:v,y:o.y+o.height};break;case"right":l={x:o.x+o.width,y:p};break;case"left":l={x:o.x-s.width,y:p};break;default:l={x:o.x,y:o.y}}switch(ye(t)){case"start":l[a]-=r*(n&&u?-1:1);break;case"end":l[a]+=r*(n&&u?-1:1);break}return l}const _o=async(e,t,n)=>{const{placement:o="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,c=i.filter(Boolean),d=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:v,y:p}=ft(u,o,d),r=o,l={},m=0;for(let _=0;_<c.length;_++){const{name:g,fn:b}=c[_],{x:k,y:$,data:O,reset:B}=await b({x:v,y:p,initialPlacement:o,placement:r,strategy:s,middlewareData:l,rects:u,platform:a,elements:{reference:e,floating:t}});v=k??v,p=$??p,l={...l,[g]:{...l[g],...O}},B&&m<=50&&(m++,typeof B=="object"&&(B.placement&&(r=B.placement),B.rects&&(u=B.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):B.rects),{x:v,y:p}=ft(u,r,d)),_=-1)}return{x:v,y:p,placement:r,strategy:s,middlewareData:l}};async function yo(e,t){var n;t===void 0&&(t={});const{x:o,y:s,platform:i,rects:a,elements:c,strategy:d}=e,{boundary:u="clippingAncestors",rootBoundary:v="viewport",elementContext:p="floating",altBoundary:r=!1,padding:l=0}=kt(t,e),m=ho(l),g=c[r?p==="floating"?"reference":"floating":p],b=Oe(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(g)))==null||n?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(c.floating)),boundary:u,rootBoundary:v,strategy:d})),k=p==="floating"?{x:o,y:s,width:a.floating.width,height:a.floating.height}:a.reference,$=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c.floating)),O=await(i.isElement==null?void 0:i.isElement($))?await(i.getScale==null?void 0:i.getScale($))||{x:1,y:1}:{x:1,y:1},B=Oe(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:k,offsetParent:$,strategy:d}):k);return{top:(b.top-B.top+m.top)/O.y,bottom:(B.bottom-b.bottom+m.bottom)/O.y,left:(b.left-B.left+m.left)/O.x,right:(B.right-b.right+m.right)/O.x}}function go(e,t,n){return(e?[...n.filter(s=>ye(s)===e),...n.filter(s=>ye(s)!==e)]:n.filter(s=>Ve(s)===s)).filter(s=>e?ye(s)===e||(t?mo(s)!==s:!1):!0)}const wo=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,o,s;const{rects:i,middlewareData:a,placement:c,platform:d,elements:u}=t,{crossAxis:v=!1,alignment:p,allowedPlacements:r=ct,autoAlignment:l=!0,...m}=kt(e,t),_=p!==void 0||r===ct?go(p||null,l,r):r,g=await yo(t,m),b=((n=a.autoPlacement)==null?void 0:n.index)||0,k=_[b];if(k==null)return{};const $=po(k,i,await(d.isRTL==null?void 0:d.isRTL(u.floating)));if(c!==k)return{reset:{placement:_[0]}};const O=[g[Ve(k)],g[$[0]],g[$[1]]],B=[...((o=a.autoPlacement)==null?void 0:o.overflows)||[],{placement:k,overflows:O}],ae=_[b+1];if(ae)return{data:{index:b+1,overflows:B},reset:{placement:ae}};const P=B.map(H=>{const X=ye(H.placement);return[H.placement,X&&v?H.overflows.slice(0,2).reduce((ve,x)=>ve+x,0):H.overflows[0],H.overflows]}).sort((H,X)=>H[1]-X[1]),ie=((s=P.filter(H=>H[2].slice(0,ye(H[0])?2:3).every(X=>X<=0))[0])==null?void 0:s[0])||P[0][0];return ie!==c?{data:{index:b+1,overflows:B},reset:{placement:ie}}:{}}}};function We(){return typeof window<"u"}function ge(e){return et(e)?(e.nodeName||"").toLowerCase():"#document"}function z(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function fe(e){var t;return(t=(et(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function et(e){return We()?e instanceof Node||e instanceof z(e).Node:!1}function G(e){return We()?e instanceof Element||e instanceof z(e).Element:!1}function ne(e){return We()?e instanceof HTMLElement||e instanceof z(e).HTMLElement:!1}function pt(e){return!We()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof z(e).ShadowRoot}function Ae(e){const{overflow:t,overflowX:n,overflowY:o,display:s}=Y(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(s)}function bo(e){return["table","td","th"].includes(ge(e))}function Ne(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function tt(e){const t=nt(),n=G(e)?Y(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function So(e){let t=me(e);for(;ne(t)&&!ke(t);){if(tt(t))return t;if(Ne(t))return null;t=me(t)}return null}function nt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ke(e){return["html","body","#document"].includes(ge(e))}function Y(e){return z(e).getComputedStyle(e)}function He(e){return G(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function me(e){if(ge(e)==="html")return e;const t=e.assignedSlot||e.parentNode||pt(e)&&e.host||fe(e);return pt(t)?t.host:t}function Tt(e){const t=me(e);return ke(t)?e.ownerDocument?e.ownerDocument.body:e.body:ne(t)&&Ae(t)?t:Tt(t)}function ze(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=Tt(e),i=s===((o=e.ownerDocument)==null?void 0:o.body),a=z(s);if(i){const c=Ge(a);return t.concat(a,a.visualViewport||[],Ae(s)?s:[],c&&n?ze(c):[])}return t.concat(s,ze(s,[],n))}function Ge(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Bt(e){const t=Y(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const s=ne(e),i=s?e.offsetWidth:n,a=s?e.offsetHeight:o,c=Re(n)!==i||Re(o)!==a;return c&&(n=i,o=a),{width:n,height:o,$:c}}function Dt(e){return G(e)?e:e.contextElement}function Se(e){const t=Dt(e);if(!ne(t))return Q(1);const n=t.getBoundingClientRect(),{width:o,height:s,$:i}=Bt(t);let a=(i?Re(n.width):n.width)/o,c=(i?Re(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!c||!Number.isFinite(c))&&(c=1),{x:a,y:c}}const ko=Q(0);function Et(e){const t=z(e);return!nt()||!t.visualViewport?ko:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Co(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==z(e)?!1:t}function Ee(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=Dt(e);let a=Q(1);t&&(o?G(o)&&(a=Se(o)):a=Se(e));const c=Co(i,n,o)?Et(i):Q(0);let d=(s.left+c.x)/a.x,u=(s.top+c.y)/a.y,v=s.width/a.x,p=s.height/a.y;if(i){const r=z(i),l=o&&G(o)?z(o):o;let m=r,_=Ge(m);for(;_&&o&&l!==m;){const g=Se(_),b=_.getBoundingClientRect(),k=Y(_),$=b.left+(_.clientLeft+parseFloat(k.paddingLeft))*g.x,O=b.top+(_.clientTop+parseFloat(k.paddingTop))*g.y;d*=g.x,u*=g.y,v*=g.x,p*=g.y,d+=$,u+=O,m=z(_),_=Ge(m)}}return Oe({width:v,height:p,x:d,y:u})}function ot(e,t){const n=He(e).scrollLeft;return t?t.left+n:Ee(fe(e)).left+n}function Pt(e,t,n){n===void 0&&(n=!1);const o=e.getBoundingClientRect(),s=o.left+t.scrollLeft-(n?0:ot(e,o)),i=o.top+t.scrollTop;return{x:s,y:i}}function $o(e){let{elements:t,rect:n,offsetParent:o,strategy:s}=e;const i=s==="fixed",a=fe(o),c=t?Ne(t.floating):!1;if(o===a||c&&i)return n;let d={scrollLeft:0,scrollTop:0},u=Q(1);const v=Q(0),p=ne(o);if((p||!p&&!i)&&((ge(o)!=="body"||Ae(a))&&(d=He(o)),ne(o))){const l=Ee(o);u=Se(o),v.x=l.x+o.clientLeft,v.y=l.y+o.clientTop}const r=a&&!p&&!i?Pt(a,d,!0):Q(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-d.scrollLeft*u.x+v.x+r.x,y:n.y*u.y-d.scrollTop*u.y+v.y+r.y}}function xo(e){return Array.from(e.getClientRects())}function To(e){const t=fe(e),n=He(e),o=e.ownerDocument.body,s=Be(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),i=Be(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let a=-n.scrollLeft+ot(e);const c=-n.scrollTop;return Y(o).direction==="rtl"&&(a+=Be(t.clientWidth,o.clientWidth)-s),{width:s,height:i,x:a,y:c}}function Bo(e,t){const n=z(e),o=fe(e),s=n.visualViewport;let i=o.clientWidth,a=o.clientHeight,c=0,d=0;if(s){i=s.width,a=s.height;const u=nt();(!u||u&&t==="fixed")&&(c=s.offsetLeft,d=s.offsetTop)}return{width:i,height:a,x:c,y:d}}function Do(e,t){const n=Ee(e,!0,t==="fixed"),o=n.top+e.clientTop,s=n.left+e.clientLeft,i=ne(e)?Se(e):Q(1),a=e.clientWidth*i.x,c=e.clientHeight*i.y,d=s*i.x,u=o*i.y;return{width:a,height:c,x:d,y:u}}function mt(e,t,n){let o;if(t==="viewport")o=Bo(e,n);else if(t==="document")o=To(fe(e));else if(G(t))o=Do(t,n);else{const s=Et(e);o={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Oe(o)}function At(e,t){const n=me(e);return n===t||!G(n)||ke(n)?!1:Y(n).position==="fixed"||At(n,t)}function Eo(e,t){const n=t.get(e);if(n)return n;let o=ze(e,[],!1).filter(c=>G(c)&&ge(c)!=="body"),s=null;const i=Y(e).position==="fixed";let a=i?me(e):e;for(;G(a)&&!ke(a);){const c=Y(a),d=tt(a);!d&&c.position==="fixed"&&(s=null),(i?!d&&!s:!d&&c.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Ae(a)&&!d&&At(e,a))?o=o.filter(v=>v!==a):s=c,a=me(a)}return t.set(e,o),o}function Po(e){let{element:t,boundary:n,rootBoundary:o,strategy:s}=e;const a=[...n==="clippingAncestors"?Ne(t)?[]:Eo(t,this._c):[].concat(n),o],c=a[0],d=a.reduce((u,v)=>{const p=mt(t,v,s);return u.top=Be(p.top,u.top),u.right=dt(p.right,u.right),u.bottom=dt(p.bottom,u.bottom),u.left=Be(p.left,u.left),u},mt(t,c,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function Ao(e){const{width:t,height:n}=Bt(e);return{width:t,height:n}}function Lo(e,t,n){const o=ne(t),s=fe(t),i=n==="fixed",a=Ee(e,!0,i,t);let c={scrollLeft:0,scrollTop:0};const d=Q(0);if(o||!o&&!i)if((ge(t)!=="body"||Ae(s))&&(c=He(t)),o){const r=Ee(t,!0,i,t);d.x=r.x+t.clientLeft,d.y=r.y+t.clientTop}else s&&(d.x=ot(s));const u=s&&!o&&!i?Pt(s,c):Q(0),v=a.left+c.scrollLeft-d.x-u.x,p=a.top+c.scrollTop-d.y-u.y;return{x:v,y:p,width:a.width,height:a.height}}function Ue(e){return Y(e).position==="static"}function vt(e,t){if(!ne(e)||Y(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return fe(e)===n&&(n=n.ownerDocument.body),n}function Lt(e,t){const n=z(e);if(Ne(e))return n;if(!ne(e)){let s=me(e);for(;s&&!ke(s);){if(G(s)&&!Ue(s))return s;s=me(s)}return n}let o=vt(e,t);for(;o&&bo(o)&&Ue(o);)o=vt(o,t);return o&&ke(o)&&Ue(o)&&!tt(o)?n:o||So(e)||n}const Io=async function(e){const t=this.getOffsetParent||Lt,n=this.getDimensions,o=await n(e.floating);return{reference:Lo(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function Ro(e){return Y(e).direction==="rtl"}const Oo={convertOffsetParentRelativeRectToViewportRelativeRect:$o,getDocumentElement:fe,getClippingRect:Po,getOffsetParent:Lt,getElementRects:Io,getClientRects:xo,getDimensions:Ao,getScale:Se,isElement:G,isRTL:Ro},Fo=wo,Mo=(e,t,n)=>{const o=new Map,s={platform:Oo,...n},i={...s.platform,_c:o};return _o(e,t,{...s,platform:i})};function Vo(e){return e!=null&&typeof e=="object"&&"$el"in e}function ht(e){if(Vo(e)){const t=e.$el;return et(t)&&ge(t)==="#comment"?null:t}return e}function xe(e){return typeof e=="function"?e():y(e)}function It(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function _t(e,t){const n=It(e);return Math.round(t*n)/n}function Wo(e,t,n){n===void 0&&(n={});const o=n.whileElementsMounted,s=S(()=>{var P;return(P=xe(n.open))!=null?P:!0}),i=S(()=>xe(n.middleware)),a=S(()=>{var P;return(P=xe(n.placement))!=null?P:"bottom"}),c=S(()=>{var P;return(P=xe(n.strategy))!=null?P:"absolute"}),d=S(()=>{var P;return(P=xe(n.transform))!=null?P:!0}),u=S(()=>ht(e.value)),v=S(()=>ht(t.value)),p=D(0),r=D(0),l=D(c.value),m=D(a.value),_=Je({}),g=D(!1),b=S(()=>{const P={position:l.value,left:"0",top:"0"};if(!v.value)return P;const K=_t(v.value,p.value),ie=_t(v.value,r.value);return d.value?{...P,transform:"translate("+K+"px, "+ie+"px)",...It(v.value)>=1.5&&{willChange:"transform"}}:{position:l.value,left:K+"px",top:ie+"px"}});let k;function $(){if(u.value==null||v.value==null)return;const P=s.value;Mo(u.value,v.value,{middleware:i.value,placement:a.value,strategy:c.value}).then(K=>{p.value=K.x,r.value=K.y,l.value=K.strategy,m.value=K.placement,_.value=K.middlewareData,g.value=P!==!1})}function O(){typeof k=="function"&&(k(),k=void 0)}function B(){if(O(),o===void 0){$();return}if(u.value!=null&&v.value!=null){k=o(u.value,v.value,$);return}}function ae(){s.value||(g.value=!1)}return _e([i,a,c,s],$,{flush:"sync"}),_e([u,v],B,{flush:"sync"}),_e(s,ae,{flush:"sync"}),Yt()&&Xt(O),{x:be(p),y:be(r),strategy:be(l),placement:be(m),middlewareData:be(_),isPositioned:be(g),floatingStyles:b,update:$}}const No=e=>(oe("data-v-f69fa40e"),e=e(),se(),e),Ho=No(()=>f("i",{class:"material-symbols-outlined"},"more_horiz",-1)),Ko=M({__name:"BuilderMoreDropdown",props:{options:{type:Array,default:()=>[]},disabled:{type:Boolean},hideIcons:{type:Boolean,required:!1}},emits:{select:e=>typeof e=="string"},setup(e,{emit:t}){const n=de(()=>ue(()=>import("./WdsDropdownMenu-N-JuCg1m.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),o=t,s=D(!1),i=D(),a=D(),{floatingStyles:c}=Wo(i,a,{placement:"bottom-end",middleware:[Fo({allowedPlacements:["bottom","top"]})]}),d=dn(i);_e(d,()=>{d.value||De().then(()=>s.value=!1)},{immediate:!0});function u(v){s.value=!1,o("select",v)}return(v,p)=>(h(),w("div",{ref_key:"trigger",ref:i,class:"BuilderMoreDropdown"},[T(ee,{variant:"neutral",size:"smallIcon",disabled:e.disabled,onClick:p[0]||(p[0]=r=>s.value=!s.value)},{default:A(()=>[Ho]),_:1},8,["disabled"]),s.value?(h(),I(y(n),{key:0,ref_key:"dropdown",ref:a,class:"BuilderMoreDropdown__dropdown",options:e.options,style:Me(y(c)),onSelect:u},null,8,["options","style"])):E("",!0)],512))}}),jo=V(Ko,[["__scopeId","data-v-f69fa40e"]]),qo={class:"BuilderTree"},Uo=["draggable","data-automation-key"],zo={class:"material-symbols-outlined"},Go=["data-writer-tooltip"],Yo={key:1,class:"BuilderTree__dropdown"},Xo={class:"BuilderTree__children"},Zo=M({__name:"BuilderTree",props:{name:{type:String,required:!0},query:{type:String,required:!1,default:void 0},dataAutomationKey:{type:String,required:!1,default:void 0},hasChildren:{type:Boolean},draggable:{type:Boolean},matched:{type:Boolean},selected:{type:Boolean},dropdownOptions:{type:Object,required:!1,default:void 0}},emits:{expandBranch:()=>!0,select:e=>!!e,dragover:e=>!!e,dragstart:e=>!!e,dragend:e=>!!e,drop:e=>!!e,dropdownSelect:e=>typeof e=="string"},setup(e,{expose:t,emit:n}){const o=de(()=>ue(()=>import("./BaseDropdown-BzQ2P46q.js"),__vite__mapDeps([4,5,1,2,6]),import.meta.url)),s=e,i=n;t({expand:v});const a=D(!1),c=D(!1),d=S(()=>!s.matched),u=S(()=>!s.hasChildren);function v(){a.value=!1,i("expandBranch")}function p(){a.value=!a.value}return(r,l)=>(h(),w("div",qo,[f("div",{class:N(["BuilderTree__main",{selected:e.selected,notMatched:d.value,childless:u.value}]),tabindex:"0",draggable:e.draggable,"data-automation-key":e.dataAutomationKey,onMouseenter:l[1]||(l[1]=m=>c.value=!0),onMouseleave:l[2]||(l[2]=m=>c.value=!1),onClick:l[3]||(l[3]=m=>r.$emit("select",m)),onKeydown:l[4]||(l[4]=wt(m=>r.$emit("select",m),["enter"])),onDragover:l[5]||(l[5]=m=>r.$emit("dragover",m)),onDragstart:l[6]||(l[6]=m=>r.$emit("dragstart",m)),onDragend:l[7]||(l[7]=m=>r.$emit("dragend",m)),onDrop:l[8]||(l[8]=m=>r.$emit("drop",m))},[e.hasChildren?(h(),I(ee,{key:0,class:"BuilderTree__main__collapser",variant:"neutral",size:"icon",onClick:Zt(p,["stop"])},{default:A(()=>[f("i",zo,L(a.value?"expand_more":"expand_less"),1)]),_:1})):E("",!0),pe(r.$slots,"nameLeft",{},void 0,!0),f("span",{class:"BuilderTree__main__name","data-writer-tooltip":e.name,"data-writer-tooltip-strategy":"overflow"},L(e.name),9,Go),pe(r.$slots,"nameRight",{},void 0,!0),e.dropdownOptions&&c.value?(h(),w("div",Yo,[T(y(o),{options:e.dropdownOptions,onSelected:l[0]||(l[0]=m=>r.$emit("dropdownSelect",m))},null,8,["options"])])):E("",!0)],42,Uo),Ze(f("div",Xo,[pe(r.$slots,"children",{},void 0,!0)],512),[[gt,(!a.value||s.query)&&e.hasChildren]])]))}}),Jo=V(Zo,[["__scopeId","data-v-e67c5c27"]]),Qo=M({__name:"WdsStateDot",props:{state:{type:String,required:!0}},setup(e){return(t,n)=>(h(),w("div",{class:N(["WdsStateDotState",`WdsStateDotState--${e.state}`])},null,2))}}),es=V(Qo,[["__scopeId","data-v-72dc5b3d"]]),ts=[{label:"Delete",value:"delete"}],ns=M({__name:"BuilderCodePanelSourceFilesTree",props:{sourceFiles:{type:Object,required:!0},path:{type:Array,default:()=>[]},pathActive:{type:Array,default:()=>[]},pathsUnsaved:{type:Array,default:()=>[]},displayAddFileButton:{type:Boolean}},emits:{select:e=>Array.isArray(e),delete:e=>Array.isArray(e),addFile:()=>!0},setup(e,{emit:t}){const n=e,o=t;function s(r){return r.join("/")}const i=S(()=>s(n.pathActive)),a=S(()=>n.pathsUnsaved.map(s)),c=S(()=>Le(n.sourceFiles)?Object.entries(n.sourceFiles.children).sort((r,l)=>r[0].localeCompare(l[0])):[]);function d(r){const l=s([...n.path,r]);return a.value.includes(l)}function u(r){return s([...n.path,r])===i.value}function v(r){if(!Le(n.sourceFiles))return;const l=n.sourceFiles.children[r];ce(l)&&o("select",[...n.path,r])}function p(r,l){r==="delete"&&o("delete",[...n.path,l])}return(r,l)=>(h(),w("div",null,[(h(!0),w(te,null,Ce(c.value,([m,_])=>(h(),I(Jo,{key:m,name:m,matched:"","has-children":y(Le)(_),selected:u(m),"right-click-options":ts,"dropdown-options":y(Le)(_)?{delete:"Delete"}:void 0,onSelect:g=>v(m),onDropdownSelect:g=>p(g,m)},Jt({children:A(()=>[T(Rt,{"source-files":_,"path-active":e.pathActive,"paths-unsaved":e.pathsUnsaved,path:[...e.path,m],onSelect:l[0]||(l[0]=g=>r.$emit("select",g)),onDelete:l[1]||(l[1]=g=>r.$emit("delete",g))},null,8,["source-files","path-active","paths-unsaved","path"])]),_:2},[d(m)?{name:"nameLeft",fn:A(()=>[T(es,{state:"newDraft"})]),key:"0"}:void 0]),1032,["name","has-children","selected","dropdown-options","onSelect","onDropdownSelect"]))),128))]))}}),Rt=V(ns,[["__scopeId","data-v-e51bfb46"]]),Te=Je([]);function Ot(){function e(n){Te.value=Te.value.filter(o=>o.id!==n)}function t(n){const o=new Date().getTime();Te.value=[...Te.value,{...n,id:o}],n.closable||setTimeout(()=>e(o),n.delayMs??3e3)}return{pushToast:t,removeToast:e,toasts:Qt(Te)}}const Ft=e=>(oe("data-v-1d1ce5e5"),e=e(),se(),e),os={class:"BuilderCodePanel__tree"},ss=Ft(()=>f("i",{class:"material-symbols-outlined"},"add",-1)),ls={class:"BuilderCodePanel__actionsCompanion"},as=Ft(()=>f("i",{class:"material-symbols-outlined"},"save",-1)),is=M({__name:"BuilderCodePanel",props:{contentsTeleportEl:{}},setup(e){const t=de({loader:()=>ue(()=>import("./BuilderEmbeddedCodeEditor-BPXNlHcT.js").then(x=>x.a),__vite__mapDeps([7,1,2,8]),import.meta.url),loadingComponent:he}),n=q(U.core),o=[{label:"Rename file",value:"rename",icon:"edit"},{label:"Delete file",value:"delete",icon:"delete"}],{sourceFileDraft:s,openFile:i,openNewFile:a,code:c,openedFileLanguage:d,filepathOpen:u,pathsUnsaved:v,save:p}=io(n),{pushToast:r}=Ot(),l=nn();function m(x){const Z=new AbortController;Fe(()=>{document.addEventListener("keydown",async W=>{const Ke=W.metaKey||W.ctrlKey,je=W.key==="s"||W.key==="S";!Ke||!je||(W.preventDefault(),await x())},{signal:Z.signal})}),Xe(Z.abort)}m(ve);const _=D(),g=D(""),b=D(!1),k=S(()=>{var x;return((x=u.value)==null?void 0:x.join("/"))??""}),$=S(()=>k.value!=="main.py"),O=S(()=>k.value!==g.value),B=S(()=>b.value||k.value==="main.py"),ae=S(()=>O.value?!1:u.value===void 0?!0:!v.value.map(x=>x.join("/")).includes(k.value));_e(u,()=>{var x;g.value=((x=u.value)==null?void 0:x.join("/"))??""}),_e(n.sessionTimestamp,()=>{b.value=!1});function P(x){x&&u.value===void 0&&i(["main.py"])}async function K(){var x;k.value!=="main.py"&&(await De(),(x=_.value)==null||x.focus())}async function ie(x){switch(x){case"rename":return K();case"delete":await X(u.value)}}async function H(){await a(),K()}async function X(x){await n.sendDeleteSourceFileRequest(x),r({type:"success",message:"The file was deleted"}),u.value.join("/").startsWith(x.join("/"))&&i(["main.py"])}async function ve(){if(u.value===void 0)return r({type:"error",message:"There is no file open"});if(ae.value)return r({type:"info",message:"There are not file changes to save"});b.value=!0;try{await p(O.value?g.value.split("/"):void 0),r({type:"success",message:"The file was saved"})}catch(x){l.error("The file hasn't been saved.",x),r({type:"error",message:"The file hasn't been saved"});return}finally{b.value=!1}}return(x,Z)=>(h(),I(St,{"panel-id":"code",name:"Code","contents-teleport-el":x.contentsTeleportEl,actions:[],scrollable:!1,"enable-left-panel":"","keyboard-shortcut-key":"J",class:"BuilderCodePanel",onOpenned:P},{leftPanel:A(()=>[f("div",os,[T(Rt,{"path-active":y(u),"paths-unsaved":y(v),"source-files":y(s),onAddFile:H,onSelect:y(i),onDelete:X},null,8,["path-active","paths-unsaved","source-files","onSelect"]),f("button",{class:"BuilderCodePanel__tree__addFile",onClick:H},[ss,F(" Add file ")])])]),actionsCompanion:A(()=>[f("div",ls,[T(en,{ref_key:"filenameEl",ref:_,modelValue:g.value,"onUpdate:modelValue":Z[1]||(Z[1]=W=>g.value=W),disabled:!$.value,class:"BuilderCodePanel__actionsCompanion__filename",autofocus:"",variant:"ghost",onKeydown:wt(ve,["enter"])},null,8,["modelValue","disabled"]),T(ee,{variant:"primary",size:"small",disabled:b.value||ae.value,class:"BuilderCodePanel__actionsCompanion__saveBtn",onClick:ve},{default:A(()=>[as,F(" Save file ")]),_:1},8,["disabled"]),T(jo,{disabled:B.value,options:o,onSelect:ie},null,8,["disabled"])])]),default:A(()=>[T(y(t),{modelValue:y(c),"onUpdate:modelValue":Z[0]||(Z[0]=W=>tn(c)?c.value=W:null),variant:"full",language:y(d),disabled:b.value},null,8,["modelValue","language","disabled"])]),_:1},8,["contents-teleport-el"]))}}),rs=V(is,[["__scopeId","data-v-1d1ce5e5"]]),le=e=>(oe("data-v-92612d54"),e=e(),se(),e),cs={class:"BuilderLogWorkflowExecution"},ds=le(()=>f("div",{class:"marker top"},null,-1)),us=le(()=>f("div",{class:"marker bottom"},null,-1)),fs={class:"item"},ps={class:"name"},ms=le(()=>f("i",{class:"material-symbols-outlined"},"jump_to_element",-1)),vs={class:"outcome"},hs={class:"result"},_s={class:"detailsModalContent"},ys=le(()=>f("h2",null,"Result",-1)),gs=le(()=>f("p",null," The value resulting of the execution of this block. This value is added to the execution environment of the direct dependents of this block. There, it's accessible via @{result}. ",-1)),ws={class:"data","data-automation-key":"result"},bs={key:1,class:"nothing"},Ss=le(()=>f("h2",null,"Execution environment",-1)),ks=le(()=>f("p",null," The following values were made available to this block during execution time. These values are accessible via the same template syntax i.e. @{my_var}, as state elements. ",-1)),Cs={class:"data"},$s={key:1,class:"nothing"},xs=le(()=>f("h2",null,"Return value",-1)),Ts=le(()=>f("p",null," The value being returned, which is used to determine the result of 'Run workflow' blocks and 'Chat completion' tool calls. ",-1)),Bs={class:"data","data-automation-key":"return-value"},Ds=le(()=>f("i",{class:"material-symbols-outlined"},"find_in_page",-1)),Es={class:"time"},Ps={key:0,class:"message markdown"},As=M({__name:"BuilderLogWorkflowExecution",props:{executionLog:{}},setup(e){const t=q(U.core),n=q(U.builderManager),{goToComponentParentPage:o}=Ye(t,n),s=e,i=D(null),a=S(()=>({summary:[...s.executionLog.summary.map(v=>({...v,component:t.getComponentById(v.componentId),componentDef:t.getComponentById(v.componentId)?t.getComponentDefinition(t.getComponentById(v.componentId).type):void 0}))]}));async function c(u){n.setMode("workflows"),await De(),o(u),await De(),n.setSelection(u,void 0,"log")}function d(u){return u<0?"N/A":u<.1?"< 0.1s":`${u.toFixed(2)}s`}return(u,v)=>{const p=on("dompurify-html");return h(),w("div",cs,[(h(!0),w(te,null,Ce(a.value.summary,(r,l)=>{var m,_;return h(),w("div",{key:l,class:"row"},[ds,us,f("div",fs,[f("div",ps,[F(L(r.componentDef.name)+" ",1),T(ee,{variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to this block",onClick:g=>c(r.componentId)},{default:A(()=>[ms]),_:2},1032,["onClick"])]),f("div",vs,[f("div",{class:N(["ball",(m=r.componentDef.outs[r.outcome])==null?void 0:m.style])},null,2),F(" "+L(((_=r.componentDef.outs[r.outcome])==null?void 0:_.name)??r.outcome),1)]),f("div",hs,[i.value==l?(h(),I(bt,{key:0,"close-action":{desc:"Close",fn:()=>i.value=null},icon:"find_in_page","modal-title":"Details"},{default:A(()=>[f("div",_s,[f("div",null,[ys,gs,f("div",ws,[r!=null&&r.result?(h(),I(Ie,{key:0,data:r.result,"initial-depth":1,class:"data"},null,8,["data"])):(h(),w("div",bs,"No result."))])]),f("div",null,[Ss,ks,f("div",Cs,[r!=null&&r.executionEnvironment?(h(),I(Ie,{key:0,data:r.executionEnvironment,"initial-depth":1,class:"data"},null,8,["data"])):(h(),w("div",$s," Empty execution environment. "))])]),f("div",null,[xs,Ts,f("div",Bs,[r!=null&&r.returnValue?(h(),I(Ie,{key:0,data:r.returnValue,"initial-depth":1,class:"data"},null,8,["data"])):(h(),w(te,{key:1},[F(" No return value. ")],64))])])])]),_:2},1032,["close-action"])):E("",!0),r.result||r.returnValue||r.executionEnvironment?(h(),I(ee,{key:1,variant:"special",size:"small",onClick:()=>i.value=l},{default:A(()=>[Ds,F(" Details ")]),_:2},1032,["onClick"])):E("",!0)]),f("div",Es,L(d(r.executionTimeInSeconds)),1),r.message?Ze((h(),w("div",Ps,null,512)),[[p,y(un).parse(r.message)]]):E("",!0)])])}),128))])}}}),Ls=V(As,[["__scopeId","data-v-92612d54"]]),Mt=e=>(oe("data-v-34a7a9ff"),e=e(),se(),e),Is={class:"BuilderLogIndicator"},Rs={key:0,class:"number error"},Os=Mt(()=>f("div",{class:"icon"},[f("i",{class:"material-symbols-outlined"},"error")],-1)),Fs={key:1,class:"number info"},Ms=Mt(()=>f("div",{class:"icon"},[f("i",{class:"material-symbols-outlined"},"info")],-1)),Vs=M({__name:"BuilderLogIndicator",setup(e){const t=q(U.builderManager),n=S(()=>t.getLogEntries().reduce((o,s)=>(s.type in o||(o[s.type]=0),o[s.type]++,o),{}));return(o,s)=>(h(),w("div",Is,[n.value.error>0?(h(),w("div",Rs,[Os,F(" "+L(n.value.error??0),1)])):E("",!0),n.value.info>0?(h(),w("div",Fs,[Ms,F(" "+L(n.value.info??0),1)])):E("",!0)]))}}),Ws=V(Vs,[["__scopeId","data-v-34a7a9ff"]]),Ns=e=>(oe("data-v-f784bc20"),e=e(),se(),e),Hs={key:0,class:"entries"},Ks={class:"icon"},js={key:0,class:"material-symbols-outlined"},qs={key:1,class:"material-symbols-outlined"},Us={class:"title"},zs={class:"time"},Gs={class:"content"},Ys={key:0,class:"codeContainer"},Xs={key:1,class:"emptyMessage"},Zs=Ns(()=>f("div",null,[F(" Exceptions and other relevant messages will be shown here."),f("br"),F("Also, you can include print statements in event handlers to create log entries. ")],-1)),Js=[Zs],Qs=M({__name:"BuilderLogPanel",props:{contentsTeleportEl:{}},setup(e){const t=q(U.builderManager),n=[{icon:"delete",name:"Clear log",callback:()=>{t.clearLogEntries()},keyboardShortcut:{modifierKey:!0,key:"L"}}],o=S(()=>t.getLogEntries());return(s,i)=>(h(),I(St,{"panel-id":"log",name:"Log","contents-teleport-el":s.contentsTeleportEl,actions:n,scrollable:!0,"keyboard-shortcut-key":"K",class:"BuilderLogPanel"},{titleCompanion:A(()=>[T(Ws)]),default:A(()=>[o.value.length>0?(h(),w("div",Hs,[(h(!0),w(te,null,Ce(o.value,(a,c)=>(h(),w(te,{key:c},[f("div",{class:N(["entry",a.type])},[f("div",Ks,[a.type=="error"?(h(),w("i",js,"error")):(h(),w("i",qs,"info"))]),f("div",Us,L(a.title)+L(a.repeated>0?` · Repeated ${a.repeated} times`:""),1),f("div",zs,L(a.timestampReceived.toLocaleTimeString()),1),f("div",Gs,[F(L(a.message)+" ",1),a.code?(h(),w("div",Ys,[f("code",null,L(a.code),1)])):E("",!0)])],2),a.workflowExecution?(h(),I(Ls,{key:0,"execution-log":a.workflowExecution},null,8,["execution-log"])):E("",!0)],64))),128))])):E("",!0),o.value.length==0?(h(),w("div",Xs,Js)):E("",!0)]),_:1},8,["contents-teleport-el"]))}}),el=V(Qs,[["__scopeId","data-v-f784bc20"]]),tl={class:"switches"},nl=M({__name:"BuilderPanelSwitcher",setup(e){const t=q(U.builderManager),n=D(null);return(o,s)=>(h(),w("div",{class:N(["BuilderPanelSwitcher",{openPanels:y(t).openPanels.value.size>0}])},[f("div",{ref_key:"screenEl",ref:n,class:"screen"},null,512),f("div",tl,[T(rs,{"contents-teleport-el":n.value},null,8,["contents-teleport-el"]),T(el,{"contents-teleport-el":n.value},null,8,["contents-teleport-el"])])],2))}}),ol=V(nl,[["__scopeId","data-v-b0926591"]]),sl=e=>(oe("data-v-9bb8d639"),e=e(),se(),e),ll={class:"WdsToast__icon"},al={class:"material-symbols-outlined"},il=sl(()=>f("span",{class:"material-symbols-outlined"},"close",-1)),rl=M({__name:"WdsToast",props:{type:{type:String,required:!0},message:{type:String,required:!0},closable:{type:Boolean}},emits:{close:()=>!0},setup(e){const t=e,n=S(()=>{switch(t.type){case"info":return"info";case"success":return"check";case"error":return"close";default:return"question_mark"}});return(o,s)=>(h(),w("div",{class:N(["WdsToast",`WdsToast--${e.type}`])},[f("div",ll,[f("span",al,L(n.value),1)]),f("p",null,L(e.message),1),e.closable?(h(),I(ee,{key:0,class:"WdsToast__close",variant:"neutral",size:"smallIcon",onClick:s[0]||(s[0]=i=>o.$emit("close"))},{default:A(()=>[il]),_:1})):E("",!0)],2))}}),cl=V(rl,[["__scopeId","data-v-9bb8d639"]]),dl={class:"BuilderToasts"},ul=M({__name:"BuilderToasts",setup(e){const{toasts:t,removeToast:n}=Ot();return(o,s)=>(h(),w("div",dl,[T(sn,{name:"list",tag:"div"},{default:A(()=>[(h(!0),w(te,null,Ce(y(t),i=>(h(),I(cl,{key:i.id,class:"BuilderToasts__toast",closable:i.closable,message:i.message,type:i.type,onClick:a=>y(n)(i.id)},null,8,["closable","message","type","onClick"]))),128))]),_:1})]))}}),fl=V(ul,[["__scopeId","data-v-d7aa9182"]]),pl=e=>(oe("data-v-3f1c20fd"),e=e(),se(),e),ml={key:0,class:"sidebar"},vl={class:"builderMain"},hl={class:"rendererWrapper"},_l=pl(()=>f("div",{id:"modal"},null,-1)),yl=M({__name:"BuilderApp",setup(e){ln(C=>({bfcacb52:y(d).getMode()!=="preview"?"var(--builderSidebarWidth)":"0px"}));const t=de({loader:()=>ue(()=>import("./BuilderSettings-C5qYB46P.js").then(C=>C.a),__vite__mapDeps([9,1,2,10,5,7,8,11,12]),import.meta.url),loadingComponent:he}),n=de({loader:()=>ue(()=>import("./BuilderSidebar-DsqFIu0i.js"),__vite__mapDeps([13,1,2,5,11,14]),import.meta.url),loadingComponent:he}),o=de({loader:()=>ue(()=>import("./ComponentRenderer-BhrKbn-H.js"),__vite__mapDeps([15,1,2,10,16]),import.meta.url),loadingComponent:he}),s=de({loader:()=>ue(()=>import("./BuilderInstanceTracker-ItqegQZP.js"),__vite__mapDeps([17,1,2,18]),import.meta.url),loadingComponent:he}),i=de({loader:()=>ue(()=>import("./BuilderInsertionOverlay-BkFYq_8i.js"),__vite__mapDeps([19,1,2,20]),import.meta.url),loadingComponent:he}),a=de({loader:()=>ue(()=>import("./BuilderInsertionLabel-B8dnD-AQ.js"),__vite__mapDeps([21,1,2,22]),import.meta.url),loadingComponent:he}),c=q(U.core),d=q(U.builderManager),{candidateId:u,candidateInstancePath:v,isCandidacyConfirmed:p,dropComponent:r,assignInsertionCandidacy:l,removeInsertionCandidacy:m}=rn(c),{createAndInsertComponent:_,undo:g,redo:b,moveComponent:k,moveComponentUp:$,moveComponentDown:O,cutComponent:B,isPasteAllowed:ae,isCopyAllowed:P,isCutAllowed:K,isDeleteAllowed:ie,isGoToParentAllowed:H,pasteComponent:X,copyComponent:ve,removeComponentSubtree:x,goToParent:Z}=Ye(c,d),W=S(()=>d.getMode()),Ke=S(()=>d.firstSelectedId.value);function je(C){if(C.key=="Escape"){d.setSelection(null);return}const j=cn()?C.metaKey:C.ctrlKey;if(C.target.closest("textarea, input, select"))return;if(C.key=="z"&&j){C.preventDefault(),g();return}if(C.key=="y"&&j){C.preventDefault(),b();return}if(!d.isSingleSelectionActive.value||!d.firstSelectedItem.value)return;const{componentId:R,instancePath:we}=d.firstSelectedItem.value;if(C.key=="Delete"){if(!ie(R))return;x(R);return}if(C.key=="ArrowUp"&&j&&C.shiftKey){if(!H(R))return;Z(R,we);return}if(C.key=="ArrowUp"&&j){$(R);return}if(C.key=="ArrowDown"&&j){O(R);return}if(C.key=="v"&&j){if(!ae(R))return;X(R);return}if(C.key=="c"&&j){if(!P(R))return;ve(R);return}if(C.key=="x"&&j){if(!K(R))return;B(R);return}}function Vt(C){W.value!=="preview"&&l(C)}function Wt(C){if(W.value==="preview")return;d.setSelection(null);const j=r(C);if(!j)return;const{draggedType:J,draggedId:R,parentId:we,position:qe}=j;R?k(R,we,qe):_(J,we,qe)}function Nt(C){if(W.value==="preview"||C.target.closest("[data-writer-unselectable]"))return;const J=C.target.closest("[data-writer-id]");if(!J)return;const R=J.dataset.writerId,we=J.dataset.writerInstancePath;d.isComponentIdSelected(R)&&d.selectionStatus.value!==it.Multiple||(C.preventDefault(),C.stopPropagation(),d.handleSelectionFromEvent(C,R,we,"click"))}const Ht=C=>{if(W.value==="preview")return;const J=C.target.closest("[data-writer-id]").dataset.writerId,{type:R}=c.getComponentById(J);d.selectionStatus.value===it.Multiple&&(d.setSelection(J,void 0,"click"),d.isSettingsBarCollapsed.value=!0),C.dataTransfer.setData(`application/json;writer=${R},${J}`,"{}")};function Kt(C){d.setSelection(null),m(C)}return Fe(()=>{document.addEventListener("keydown",je)}),(C,j)=>(h(),w("div",{class:"BuilderApp",tabindex:"-1",style:Me(y(an))},[f("div",{class:N(["mainGrid",{openPanels:y(d).openPanels.value.size>0}])},[T(Hn,{class:"builderHeader"}),W.value!=="preview"?(h(),w("div",ml,[T(y(n))])):E("",!0),f("div",vl,[f("div",hl,[T(y(o),{class:N(["componentRenderer",{settingsOpen:y(d).isSingleSelectionActive}]),onDragover:Vt,onDragstart:Ht,onDragend:Kt,onDrop:Wt,onClickCapture:Nt},null,8,["class"])]),y(d).isSingleSelectionActive?(h(),I(y(t),{key:Ke.value??"noneSelected"})):E("",!0)]),T(ol,{class:"panelSwitcher"})],2),W.value!=="preview"?(h(),w(te,{key:0},[y(u)&&!y(p)?(h(),w(te,{key:0},[(h(),I(y(s),{key:y(v),class:"insertionOverlayTracker","is-off-bounds-allowed":!0,"instance-path":y(v),"match-size":!0},{default:A(()=>[T(y(i))]),_:1},8,["instance-path"])),(h(),I(y(s),{key:y(v),class:"insertionLabelTracker","instance-path":y(v),"vertical-offset-pixels":-48},{default:A(()=>[T(y(a),null,{default:A(()=>[F(L(y(c).getComponentDefinition(y(c).getComponentById(y(u)).type).name),1)]),_:1})]),_:1},8,["instance-path"]))],64)):E("",!0)],64)):E("",!0),_l,T(zn,{id:"tooltip"}),T(fl)],4))}}),gl=V(yl,[["__scopeId","data-v-3f1c20fd"]]),kl=Object.freeze(Object.defineProperty({__proto__:null,default:gl},Symbol.toStringTag,{value:"Module"}));export{bt as B,Jo as T,Fo as a,he as b,kl as c,Wo as u};
