function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./WdsDropdownMenu-N-JuCg1m.js","./index-BEZl8isL.js","./index-DCFl8Y0i.css","./WdsDropdownMenu-BWdTjq4P.css","./BuilderEmbeddedCodeEditor-BPXNlHcT.js","./BuilderEmbeddedCodeEditor-CBDIL25Y.css","./BuilderSettingsHandlers-D1rEV6W_.js","./BuilderApp-enbW7Uwi.js","./useFocusWithin-D9cSjn1O.js","./marked.esm-273vDTCT.js","./BuilderApp-DPjY_zZq.css","./instancePath-BsbOTTI8.js","./BuilderSettingsHandlers-CltCfJyM.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{d as Y,i as W,a as j,c as M,r as R,w as Ce,k as ye,o as d,e as w,N as y,b as O,n as D,W as G,L as S,U as be,al as Te,m as V,f as m,s as H,x as fe,t as z,y as Ve,P as se,z as oe,A as le,_ as J,aE as rt,aF as ut,R as ue,G as xt,a7 as ze,K as Ke,Y as Ct,ag as ct,ad as ie,q as X,l as ke,aG as dt,E as Ye,M as ve,az as Ee,a9 as Ze,u as vt,v as Ae,aH as et,a8 as Et,aI as Bt,aJ as Mt,aK as At,aL as Ft,aM as Tt,F as ce,aq as te,ai as Ot}from"./index-BEZl8isL.js";import{B as Je,u as Vt,a as Pt,b as Rt}from"./BuilderApp-enbW7Uwi.js";import{p as Lt}from"./instancePath-BsbOTTI8.js";import{u as Wt}from"./useFocusWithin-D9cSjn1O.js";import{B as tt}from"./BuilderEmbeddedCodeEditor-BPXNlHcT.js";import{marked as jt}from"./marked.esm-273vDTCT.js";const pe=e=>(oe("data-v-ec64d80f"),e=e(),le(),e),Dt=["data-writer-id"],Nt=pe(()=>m("i",{class:"material-symbols-outlined"},"add",-1)),Ut=pe(()=>m("i",{class:"material-symbols-outlined"},"arrow_upward",-1)),qt=pe(()=>m("i",{class:"material-symbols-outlined"},"arrow_downward",-1)),zt=pe(()=>m("i",{class:"material-symbols-outlined"},"cut",-1)),Kt=pe(()=>m("i",{class:"material-symbols-outlined"},"content_copy",-1)),Yt=pe(()=>m("i",{class:"material-symbols-outlined"},"content_paste",-1)),Jt=pe(()=>m("i",{class:"material-symbols-outlined"},"move_up",-1)),Gt=pe(()=>m("i",{class:"material-symbols-outlined"},"close",-1)),Ht=pe(()=>m("i",{class:"material-symbols-outlined"},"delete",-1)),Xt={id:"validChildrenTypes"},Qt=["value"],Zt=Y({__name:"BuilderSettingsActions",setup(e){const t=W(j.core),n=W(j.builderManager),{createAndInsertComponent:o,moveComponentUp:s,moveComponentDown:i,cutComponent:a,pasteComponent:l,copyComponent:r,isAddAllowed:f,isCopyAllowed:c,isCutAllowed:h,isGoToParentAllowed:p,isPasteAllowed:u,isDeleteAllowed:k,getEnabledMoves:b,removeComponentsSubtree:L,goToParent:T}=se(t,n);function C(){if(!I.value.isDeleteEnabled)return;const _=n.selection.value.map(E=>E.componentId);_.length!==0&&L(..._)}const B=n.firstSelectedId,F=M(()=>{var _;return(_=n.firstSelectedItem.value)==null?void 0:_.instancePath}),$=R(!1),I=R(null),x=M(()=>{const _=t.getContainableTypes(B.value),E={};return _.map(q=>{const N=t.getComponentDefinition(q);E[q]=N}),E});function A(_){const E=_.target.value,q=Object.entries(x.value).filter(([U,ae])=>ae.name==E);if(q.length==0)return;const N=q[0][0];o(N,B.value),$.value=!1}function v(){var N,U;const _=t.getComponentById(B.value);if(!_)return;const{up:E,down:q}=b(B.value);I.value={isAddEnabled:f(B.value),componentTypeName:(N=t.getComponentDefinition(_.type))==null?void 0:N.name,toolkit:(U=t.getComponentDefinition(_.type))==null?void 0:U.toolkit,isMoveUpEnabled:E,isMoveDownEnabled:q,isCopyEnabled:c(B.value),isCutEnabled:h(B.value),isPasteEnabled:u(B.value),isGoToParentEnabled:p(B.value),isDeleteEnabled:k(B.value)}}const g={desc:"Close",fn:()=>{$.value=!1}};return Ce(()=>{var _;return(_=t.getComponentById(B.value))==null?void 0:_.position},async _=>{typeof _>"u"||_===null||v()},{flush:"post"}),ye(()=>{v()}),(_,E)=>{var q,N,U,ae,Ie,$e,we,xe;return d(),w("div",{class:Ve(["BuilderSettingsActions",{collapsed:y(n).isSettingsBarCollapsed.value}]),"data-writer-id":y(B)},[y(n).isSingleSelectionActive.value?(d(),O(G,{key:0,"data-writer-tooltip":"Add child","data-writer-tooltip-placement":"left",variant:"neutral",size:"smallIcon",class:"actionButton",disabled:!((q=I.value)!=null&&q.isAddEnabled),onClick:E[0]||(E[0]=Z=>{var K;return(K=I.value)!=null&&K.isAddEnabled?$.value=!0:void 0})},{default:D(()=>[Nt]),_:1},8,["disabled"])):S("",!0),y(n).isSingleSelectionActive.value?(d(),O(G,{key:1,class:"actionButton",size:"small",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":`Move up (${y(be)()}↑)`,disabled:!((N=I.value)!=null&&N.isMoveUpEnabled),onClick:E[1]||(E[1]=Z=>{var K;return(K=I.value)!=null&&K.isMoveUpEnabled?y(s)(y(B)):void 0})},{default:D(()=>[Ut]),_:1},8,["data-writer-tooltip","disabled"])):S("",!0),y(n).isSingleSelectionActive.value?(d(),O(G,{key:2,class:"actionButton",variant:"neutral",size:"small","data-writer-tooltip":`Move down (${y(be)()}↓)`,"data-writer-tooltip-placement":"left",disabled:!((U=I.value)!=null&&U.isMoveDownEnabled),onClick:E[2]||(E[2]=Z=>{var K;return(K=I.value)!=null&&K.isMoveDownEnabled?y(i)(y(B)):void 0})},{default:D(()=>[qt]),_:1},8,["data-writer-tooltip","disabled"])):S("",!0),y(n).isSingleSelectionActive.value?(d(),O(G,{key:3,class:"actionButton",variant:"neutral",size:"small","data-writer-tooltip":`Cut (${y(be)()}X)`,"data-writer-tooltip-placement":"left",disabled:!((ae=I.value)!=null&&ae.isCutEnabled),onClick:E[3]||(E[3]=Z=>{var K;return(K=I.value)!=null&&K.isCutEnabled?y(a)(y(B)):void 0})},{default:D(()=>[zt]),_:1},8,["data-writer-tooltip","disabled"])):S("",!0),y(n).isSingleSelectionActive.value?(d(),O(G,{key:4,class:"actionButton",variant:"neutral",size:"small","data-writer-tooltip":`Copy (${y(be)()}C)`,"data-writer-tooltip-placement":"left",disabled:!((Ie=I.value)!=null&&Ie.isCopyEnabled),onClick:E[4]||(E[4]=Z=>{var K;return(K=I.value)!=null&&K.isCopyEnabled?y(r)(y(B)):void 0})},{default:D(()=>[Kt]),_:1},8,["data-writer-tooltip","disabled"])):S("",!0),y(n).isSingleSelectionActive.value?(d(),O(G,{key:5,class:"actionButton",variant:"neutral",size:"small","data-writer-tooltip":`Paste (${y(be)()}V)`,"data-writer-tooltip-placement":"left",disabled:!(($e=I.value)!=null&&$e.isPasteEnabled),onClick:E[5]||(E[5]=Z=>{var K;return(K=I.value)!=null&&K.isPasteEnabled?y(l)(y(B)):void 0})},{default:D(()=>[Yt]),_:1},8,["data-writer-tooltip","disabled"])):S("",!0),y(n).isSingleSelectionActive.value?(d(),O(G,{key:6,class:"actionButton",variant:"neutral",size:"small","data-writer-tooltip":`Go to parent (${y(be)()}Shift ↑)`,"data-writer-tooltip-placement":"left",disabled:!((we=I.value)!=null&&we.isGoToParentEnabled),onClick:E[6]||(E[6]=Z=>{var K;return(K=I.value)!=null&&K.isGoToParentEnabled?y(T)(y(B),F.value):void 0})},{default:D(()=>[Jt]),_:1},8,["data-writer-tooltip","disabled"])):S("",!0),y(n).selectionStatus.value===y(Te).Multiple?(d(),O(G,{key:7,class:"actionButton",variant:"neutral",size:"small","data-automation-action":"clear-selection","data-writer-tooltip":"Clear selection","data-writer-tooltip-placement":"left",onClick:E[7]||(E[7]=Z=>y(n).setSelection(null))},{default:D(()=>[Gt]),_:1})):S("",!0),V(G,{class:"actionButton delete",variant:"neutral",size:"small","data-automation-action":"delete","data-writer-tooltip":"Delete (Del)","data-writer-tooltip-placement":"left",disabled:!((xe=I.value)!=null&&xe.isDeleteEnabled),onClick:C},{default:D(()=>[Ht]),_:1},8,["disabled"]),$.value?(d(),O(Je,{key:8,"close-action":g,icon:"add","modal-title":"Add child component"},{default:D(()=>[m("input",{class:"addModalInput",type:"text",list:"validChildrenTypes",placeholder:"Component...",onChange:A},null,32),m("datalist",Xt,[(d(!0),w(H,null,fe(x.value,(Z,K)=>(d(),w("option",{key:K,value:Z.name},z(Z.name),9,Qt))),128))])]),_:1})):S("",!0)],10,Dt)}}}),en=J(Zt,[["__scopeId","data-v-ec64d80f"]]),tn={key:0,class:"material-symbols-outlined"},nn=["data-writer-tooltip"],sn={class:"BuilderSelect__trigger__arrow"},on={class:"material-symbols-outlined"},ln=Y({__name:"BuilderSelect",props:rt({options:{type:Array,default:()=>[]},defaultIcon:{type:String,required:!1,default:void 0},hideIcons:{type:Boolean,required:!1},enableSearch:{type:Boolean,required:!1}},{modelValue:{type:String,required:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=ze(()=>Ke(()=>import("./WdsDropdownMenu-N-JuCg1m.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),n=e,o=ut(e,"modelValue"),s=R(!1),i=R(),a=R(),{floatingStyles:l,update:r}=Vt(i,a,{placement:"bottom",middleware:[Pt({allowedPlacements:["bottom","top"]})]}),f=M(()=>s.value?"keyboard_arrow_up":"expand_more"),c=M(()=>n.options.find(b=>b.value===o.value)),h=M(()=>{var b;return((b=c.value)==null?void 0:b.label)??""}),p=M(()=>{var b;return n.hideIcons?"":((b=c.value)==null?void 0:b.icon)??n.defaultIcon??"help_center"}),u=Wt(i);Ce(u,()=>{u.value||ue().then(()=>s.value=!1)},{immediate:!0});function k(b){s.value=!1,o.value=b}return(b,L)=>(d(),w("div",{ref_key:"trigger",ref:i,class:"BuilderSelect"},[m("button",{class:"BuilderSelect__trigger",role:"button",onClick:L[0]||(L[0]=T=>s.value=!s.value)},[e.hideIcons?S("",!0):(d(),w("i",tn,z(p.value),1)),m("div",{class:"BuilderSelect__trigger__label","data-writer-tooltip-strategy":"overflow","data-writer-tooltip":h.value},z(h.value),9,nn),m("div",sn,[m("i",on,z(f.value),1)])]),s.value?(d(),O(y(t),{key:0,ref_key:"dropdown",ref:a,"enable-search":e.enableSearch,options:e.options,selected:o.value,style:xt(y(l)),onSelect:k,onSearch:y(r)},null,8,["enable-search","options","selected","style","onSearch"])):S("",!0)],512))}}),Ge=J(ln,[["__scopeId","data-v-ba4706e6"]]);function de(e){return Array.isArray?Array.isArray(e):ht(e)==="[object Array]"}const an=1/0;function rn(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-an?"-0":t}function un(e){return e==null?"":rn(e)}function re(e){return typeof e=="string"}function pt(e){return typeof e=="number"}function cn(e){return e===!0||e===!1||dn(e)&&ht(e)=="[object Boolean]"}function ft(e){return typeof e=="object"}function dn(e){return ft(e)&&e!==null}function ee(e){return e!=null}function Re(e){return!e.trim().length}function ht(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const vn="Incorrect 'index' type",pn=e=>`Invalid value for key ${e}`,fn=e=>`Pattern length exceeds max of ${e}.`,hn=e=>`Missing ${e} property in key`,mn=e=>`Property 'weight' in key '${e}' must be a positive integer`,nt=Object.prototype.hasOwnProperty;class _n{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(o=>{let s=mt(o);this._keys.push(s),this._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(o=>{o.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function mt(e){let t=null,n=null,o=null,s=1,i=null;if(re(e)||de(e))o=e,t=st(e),n=We(e);else{if(!nt.call(e,"name"))throw new Error(hn("name"));const a=e.name;if(o=a,nt.call(e,"weight")&&(s=e.weight,s<=0))throw new Error(mn(a));t=st(a),n=We(a),i=e.getFn}return{path:t,id:n,weight:s,src:o,getFn:i}}function st(e){return de(e)?e:e.split(".")}function We(e){return de(e)?e.join("."):e}function yn(e,t){let n=[],o=!1;const s=(i,a,l)=>{if(ee(i))if(!a[l])n.push(i);else{let r=a[l];const f=i[r];if(!ee(f))return;if(l===a.length-1&&(re(f)||pt(f)||cn(f)))n.push(un(f));else if(de(f)){o=!0;for(let c=0,h=f.length;c<h;c+=1)s(f[c],a,l+1)}else a.length&&s(f,a,l+1)}};return s(e,re(t)?t.split("."):t,0),o?n:n[0]}const gn={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},bn={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},kn={location:0,threshold:.6,distance:100},Sn={useExtendedSearch:!1,getFn:yn,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var P={...bn,...gn,...kn,...Sn};const In=/[^ ]+/g;function $n(e=1,t=3){const n=new Map,o=Math.pow(10,t);return{get(s){const i=s.match(In).length;if(n.has(i))return n.get(i);const a=1/Math.pow(i,.5*e),l=parseFloat(Math.round(a*o)/o);return n.set(i,l),l},clear(){n.clear()}}}class He{constructor({getFn:t=P.getFn,fieldNormWeight:n=P.fieldNormWeight}={}){this.norm=$n(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,o)=>{this._keysMap[n.id]=o})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,re(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();re(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,o=this.size();n<o;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!ee(t)||Re(t))return;let o={v:t,i:n,n:this.norm.get(t)};this.records.push(o)}_addObject(t,n){let o={i:n,$:{}};this.keys.forEach((s,i)=>{let a=s.getFn?s.getFn(t):this.getFn(t,s.path);if(ee(a)){if(de(a)){let l=[];const r=[{nestedArrIndex:-1,value:a}];for(;r.length;){const{nestedArrIndex:f,value:c}=r.pop();if(ee(c))if(re(c)&&!Re(c)){let h={v:c,i:f,n:this.norm.get(c)};l.push(h)}else de(c)&&c.forEach((h,p)=>{r.push({nestedArrIndex:p,value:h})})}o.$[i]=l}else if(re(a)&&!Re(a)){let l={v:a,n:this.norm.get(a)};o.$[i]=l}}}),this.records.push(o)}toJSON(){return{keys:this.keys,records:this.records}}}function _t(e,t,{getFn:n=P.getFn,fieldNormWeight:o=P.fieldNormWeight}={}){const s=new He({getFn:n,fieldNormWeight:o});return s.setKeys(e.map(mt)),s.setSources(t),s.create(),s}function wn(e,{getFn:t=P.getFn,fieldNormWeight:n=P.fieldNormWeight}={}){const{keys:o,records:s}=e,i=new He({getFn:t,fieldNormWeight:n});return i.setKeys(o),i.setIndexRecords(s),i}function Fe(e,{errors:t=0,currentLocation:n=0,expectedLocation:o=0,distance:s=P.distance,ignoreLocation:i=P.ignoreLocation}={}){const a=t/e.length;if(i)return a;const l=Math.abs(o-n);return s?a+l/s:l?1:a}function xn(e=[],t=P.minMatchCharLength){let n=[],o=-1,s=-1,i=0;for(let a=e.length;i<a;i+=1){let l=e[i];l&&o===-1?o=i:!l&&o!==-1&&(s=i-1,s-o+1>=t&&n.push([o,s]),o=-1)}return e[i-1]&&i-o>=t&&n.push([o,i-1]),n}const me=32;function Cn(e,t,n,{location:o=P.location,distance:s=P.distance,threshold:i=P.threshold,findAllMatches:a=P.findAllMatches,minMatchCharLength:l=P.minMatchCharLength,includeMatches:r=P.includeMatches,ignoreLocation:f=P.ignoreLocation}={}){if(t.length>me)throw new Error(fn(me));const c=t.length,h=e.length,p=Math.max(0,Math.min(o,h));let u=i,k=p;const b=l>1||r,L=b?Array(h):[];let T;for(;(T=e.indexOf(t,k))>-1;){let x=Fe(t,{currentLocation:T,expectedLocation:p,distance:s,ignoreLocation:f});if(u=Math.min(x,u),k=T+c,b){let A=0;for(;A<c;)L[T+A]=1,A+=1}}k=-1;let C=[],B=1,F=c+h;const $=1<<c-1;for(let x=0;x<c;x+=1){let A=0,v=F;for(;A<v;)Fe(t,{errors:x,currentLocation:p+v,expectedLocation:p,distance:s,ignoreLocation:f})<=u?A=v:F=v,v=Math.floor((F-A)/2+A);F=v;let g=Math.max(1,p-v+1),_=a?h:Math.min(p+v,h)+c,E=Array(_+2);E[_+1]=(1<<x)-1;for(let N=_;N>=g;N-=1){let U=N-1,ae=n[e.charAt(U)];if(b&&(L[U]=+!!ae),E[N]=(E[N+1]<<1|1)&ae,x&&(E[N]|=(C[N+1]|C[N])<<1|1|C[N+1]),E[N]&$&&(B=Fe(t,{errors:x,currentLocation:U,expectedLocation:p,distance:s,ignoreLocation:f}),B<=u)){if(u=B,k=U,k<=p)break;g=Math.max(1,2*p-k)}}if(Fe(t,{errors:x+1,currentLocation:p,expectedLocation:p,distance:s,ignoreLocation:f})>u)break;C=E}const I={isMatch:k>=0,score:Math.max(.001,B)};if(b){const x=xn(L,l);x.length?r&&(I.indices=x):I.isMatch=!1}return I}function En(e){let t={};for(let n=0,o=e.length;n<o;n+=1){const s=e.charAt(n);t[s]=(t[s]||0)|1<<o-n-1}return t}class yt{constructor(t,{location:n=P.location,threshold:o=P.threshold,distance:s=P.distance,includeMatches:i=P.includeMatches,findAllMatches:a=P.findAllMatches,minMatchCharLength:l=P.minMatchCharLength,isCaseSensitive:r=P.isCaseSensitive,ignoreLocation:f=P.ignoreLocation}={}){if(this.options={location:n,threshold:o,distance:s,includeMatches:i,findAllMatches:a,minMatchCharLength:l,isCaseSensitive:r,ignoreLocation:f},this.pattern=r?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(p,u)=>{this.chunks.push({pattern:p,alphabet:En(p),startIndex:u})},h=this.pattern.length;if(h>me){let p=0;const u=h%me,k=h-u;for(;p<k;)c(this.pattern.substr(p,me),p),p+=me;if(u){const b=h-me;c(this.pattern.substr(b),b)}}else c(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:o}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let k={isMatch:!0,score:0};return o&&(k.indices=[[0,t.length-1]]),k}const{location:s,distance:i,threshold:a,findAllMatches:l,minMatchCharLength:r,ignoreLocation:f}=this.options;let c=[],h=0,p=!1;this.chunks.forEach(({pattern:k,alphabet:b,startIndex:L})=>{const{isMatch:T,score:C,indices:B}=Cn(t,k,b,{location:s+L,distance:i,threshold:a,findAllMatches:l,minMatchCharLength:r,includeMatches:o,ignoreLocation:f});T&&(p=!0),h+=C,T&&B&&(c=[...c,...B])});let u={isMatch:p,score:p?h/this.chunks.length:1};return p&&o&&(u.indices=c),u}}class he{constructor(t){this.pattern=t}static isMultiMatch(t){return ot(t,this.multiRegex)}static isSingleMatch(t){return ot(t,this.singleRegex)}search(){}}function ot(e,t){const n=e.match(t);return n?n[1]:null}class Bn extends he{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Mn extends he{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const o=t.indexOf(this.pattern)===-1;return{isMatch:o,score:o?0:1,indices:[0,t.length-1]}}}class An extends he{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Fn extends he{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Tn extends he{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class On extends he{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class gt extends he{constructor(t,{location:n=P.location,threshold:o=P.threshold,distance:s=P.distance,includeMatches:i=P.includeMatches,findAllMatches:a=P.findAllMatches,minMatchCharLength:l=P.minMatchCharLength,isCaseSensitive:r=P.isCaseSensitive,ignoreLocation:f=P.ignoreLocation}={}){super(t),this._bitapSearch=new yt(t,{location:n,threshold:o,distance:s,includeMatches:i,findAllMatches:a,minMatchCharLength:l,isCaseSensitive:r,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class bt extends he{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,o;const s=[],i=this.pattern.length;for(;(o=t.indexOf(this.pattern,n))>-1;)n=o+i,s.push([o,n-1]);const a=!!s.length;return{isMatch:a,score:a?0:1,indices:s}}}const je=[Bn,bt,An,Fn,On,Tn,Mn,gt],lt=je.length,Vn=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Pn="|";function Rn(e,t={}){return e.split(Pn).map(n=>{let o=n.trim().split(Vn).filter(i=>i&&!!i.trim()),s=[];for(let i=0,a=o.length;i<a;i+=1){const l=o[i];let r=!1,f=-1;for(;!r&&++f<lt;){const c=je[f];let h=c.isMultiMatch(l);h&&(s.push(new c(h,t)),r=!0)}if(!r)for(f=-1;++f<lt;){const c=je[f];let h=c.isSingleMatch(l);if(h){s.push(new c(h,t));break}}}return s})}const Ln=new Set([gt.type,bt.type]);class Wn{constructor(t,{isCaseSensitive:n=P.isCaseSensitive,includeMatches:o=P.includeMatches,minMatchCharLength:s=P.minMatchCharLength,ignoreLocation:i=P.ignoreLocation,findAllMatches:a=P.findAllMatches,location:l=P.location,threshold:r=P.threshold,distance:f=P.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:o,minMatchCharLength:s,findAllMatches:a,ignoreLocation:i,location:l,threshold:r,distance:f},this.pattern=n?t:t.toLowerCase(),this.query=Rn(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:o,isCaseSensitive:s}=this.options;t=s?t:t.toLowerCase();let i=0,a=[],l=0;for(let r=0,f=n.length;r<f;r+=1){const c=n[r];a.length=0,i=0;for(let h=0,p=c.length;h<p;h+=1){const u=c[h],{isMatch:k,indices:b,score:L}=u.search(t);if(k){if(i+=1,l+=L,o){const T=u.constructor.type;Ln.has(T)?a=[...a,...b]:a.push(b)}}else{l=0,i=0,a.length=0;break}}if(i){let h={isMatch:!0,score:l/i};return o&&(h.indices=a),h}}return{isMatch:!1,score:1}}}const De=[];function jn(...e){De.push(...e)}function Ne(e,t){for(let n=0,o=De.length;n<o;n+=1){let s=De[n];if(s.condition(e,t))return new s(e,t)}return new yt(e,t)}const Oe={AND:"$and",OR:"$or"},Ue={PATH:"$path",PATTERN:"$val"},qe=e=>!!(e[Oe.AND]||e[Oe.OR]),Dn=e=>!!e[Ue.PATH],Nn=e=>!de(e)&&ft(e)&&!qe(e),at=e=>({[Oe.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function kt(e,t,{auto:n=!0}={}){const o=s=>{let i=Object.keys(s);const a=Dn(s);if(!a&&i.length>1&&!qe(s))return o(at(s));if(Nn(s)){const r=a?s[Ue.PATH]:i[0],f=a?s[Ue.PATTERN]:s[r];if(!re(f))throw new Error(pn(r));const c={keyId:We(r),pattern:f};return n&&(c.searcher=Ne(f,t)),c}let l={children:[],operator:i[0]};return i.forEach(r=>{const f=s[r];de(f)&&f.forEach(c=>{l.children.push(o(c))})}),l};return qe(e)||(e=at(e)),o(e)}function Un(e,{ignoreFieldNorm:t=P.ignoreFieldNorm}){e.forEach(n=>{let o=1;n.matches.forEach(({key:s,norm:i,score:a})=>{const l=s?s.weight:null;o*=Math.pow(a===0&&l?Number.EPSILON:a,(l||1)*(t?1:i))}),n.score=o})}function qn(e,t){const n=e.matches;t.matches=[],ee(n)&&n.forEach(o=>{if(!ee(o.indices)||!o.indices.length)return;const{indices:s,value:i}=o;let a={indices:s,value:i};o.key&&(a.key=o.key.src),o.idx>-1&&(a.refIndex=o.idx),t.matches.push(a)})}function zn(e,t){t.score=e.score}function Kn(e,t,{includeMatches:n=P.includeMatches,includeScore:o=P.includeScore}={}){const s=[];return n&&s.push(qn),o&&s.push(zn),e.map(i=>{const{idx:a}=i,l={item:t[a],refIndex:a};return s.length&&s.forEach(r=>{r(i,l)}),l})}class Se{constructor(t,n={},o){this.options={...P,...n},this.options.useExtendedSearch,this._keyStore=new _n(this.options.keys),this.setCollection(t,o)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof He))throw new Error(vn);this._myIndex=n||_t(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){ee(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let o=0,s=this._docs.length;o<s;o+=1){const i=this._docs[o];t(i,o)&&(this.removeAt(o),o-=1,s-=1,n.push(i))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:o,includeScore:s,shouldSort:i,sortFn:a,ignoreFieldNorm:l}=this.options;let r=re(t)?re(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Un(r,{ignoreFieldNorm:l}),i&&r.sort(a),pt(n)&&n>-1&&(r=r.slice(0,n)),Kn(r,this._docs,{includeMatches:o,includeScore:s})}_searchStringList(t){const n=Ne(t,this.options),{records:o}=this._myIndex,s=[];return o.forEach(({v:i,i:a,n:l})=>{if(!ee(i))return;const{isMatch:r,score:f,indices:c}=n.searchIn(i);r&&s.push({item:i,idx:a,matches:[{score:f,value:i,norm:l,indices:c}]})}),s}_searchLogical(t){const n=kt(t,this.options),o=(l,r,f)=>{if(!l.children){const{keyId:h,searcher:p}=l,u=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(r,h),searcher:p});return u&&u.length?[{idx:f,item:r,matches:u}]:[]}const c=[];for(let h=0,p=l.children.length;h<p;h+=1){const u=l.children[h],k=o(u,r,f);if(k.length)c.push(...k);else if(l.operator===Oe.AND)return[]}return c},s=this._myIndex.records,i={},a=[];return s.forEach(({$:l,i:r})=>{if(ee(l)){let f=o(n,l,r);f.length&&(i[r]||(i[r]={idx:r,item:l,matches:[]},a.push(i[r])),f.forEach(({matches:c})=>{i[r].matches.push(...c)}))}}),a}_searchObjectList(t){const n=Ne(t,this.options),{keys:o,records:s}=this._myIndex,i=[];return s.forEach(({$:a,i:l})=>{if(!ee(a))return;let r=[];o.forEach((f,c)=>{r.push(...this._findMatches({key:f,value:a[c],searcher:n}))}),r.length&&i.push({idx:l,item:a,matches:r})}),i}_findMatches({key:t,value:n,searcher:o}){if(!ee(n))return[];let s=[];if(de(n))n.forEach(({v:i,i:a,n:l})=>{if(!ee(i))return;const{isMatch:r,score:f,indices:c}=o.searchIn(i);r&&s.push({score:f,key:t,value:i,idx:a,norm:l,indices:c})});else{const{v:i,n:a}=n,{isMatch:l,score:r,indices:f}=o.searchIn(i);l&&s.push({score:r,key:t,value:i,norm:a,indices:f})}return s}}Se.version="7.0.0";Se.createIndex=_t;Se.parseIndex=wn;Se.config=P;Se.parseQuery=kt;jn(Wn);const Yn={class:"BuilderTemplateInput"},Jn=["id"],Gn=["value"],Hn={key:2,class:"fieldStateAutocomplete",tabindex:"-1"},Xn=["value","onClick"],Qn={class:"prop"},Zn={class:"type"},es=Y({__name:"BuilderTemplateInput",props:{inputId:{type:String,required:!1,default:void 0},value:{type:String,required:!1,default:void 0},multiline:{type:Boolean,required:!1},variant:{type:String,required:!1,default:void 0},type:{type:String,required:!1,default:void 0},options:{type:Object,required:!1,default:void 0},placeholder:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0}},emits:["input","update:value"],setup(e,{expose:t,emit:n}){const o=n,s=e,i=W(j.core),a=Ct([]),l=R(null);t({focus:()=>{var C;return(C=l.value)==null?void 0:C.focus()}});function r(C,B){return B.reduce((F,$)=>F==null?void 0:F[$],C)}const f=C=>{var _,E;let B=((_=l.value)==null?void 0:_.value)??"";const{selectionStart:F,selectionEnd:$}=((E=l.value)==null?void 0:E.getSelection())??{},I=B.slice(0,F),x=h(I);if(x===null)return;const v=x.at(-1).replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+"$",g=I.replace(new RegExp(v),C);B=g+B.slice($),o("input",{target:{value:B}}),o("update:value",B),a.value=[],l.value.focus(),ue(()=>{l.value.setSelectionEnd(g.length),l.value.setSelectionStart(g.length)})},c=C=>C===null?"null":C===void 0?"undefined":typeof C,h=C=>{if((s.type??"template")==="state")return C.split(".");const B=C.match(/@\{([^}{@]*)$/);return B?((B==null?void 0:B[1])??"").split("."):null},p=C=>C.replace(/\\/g,"\\\\").replace(/\./g,"\\."),u=C=>{o("input",C),o("update:value",C.target.value),k()},k=()=>{var E,q;const{selectionStart:C,selectionEnd:B}=((E=l.value)==null?void 0:E.getSelection())??{},F=(q=l.value)==null?void 0:q.value;if(!(C===B)){a.value=[];return}const I=F.slice(0,C),x=h(I);if(x===null){a.value=[];return}const A=x.at(-1),v=x.slice(0,-1),g=Object.entries(r(i.userState.value,v)??{}).map(([N,U])=>({text:p(N),type:c(U)})),_=new Se(g,{findAllMatches:!0,includeMatches:!0,keys:["text"]});if(A===""){a.value=g;return}a.value=_.search(A).map(N=>{const{item:U}=N;return U})};let b;function L(){b=setTimeout(()=>{a.value=[],b=null},300)}function T(){b&&(clearTimeout(b),b=null)}return(C,B)=>{const F=ct("capture-tabs");return d(),w("div",Yn,[s.multiline?S("",!0):(d(),w(H,{key:0},[V(ie,{ref_key:"input",ref:l,"model-value":s.value,autocorrect:"off",autocomplete:"off",spellcheck:"false",placeholder:s.placeholder,list:s.options?`list-${s.inputId}`:void 0,invalid:e.error!==void 0,onInput:u,onBlur:L},null,8,["model-value","placeholder","list","invalid"]),s.options?(d(),w("datalist",{key:0,id:`list-${s.inputId}`},[(d(!0),w(H,null,fe(e.options,($,I)=>(d(),w("option",{key:I,value:I},[$.toLowerCase()!==I.toLowerCase()?(d(),w(H,{key:0},[X(z($),1)],64)):S("",!0)],8,Gn))),128))],8,Jn)):S("",!0)],64)),s.multiline?ke((d(),O(dt,{key:1,ref_key:"input",ref:l,variant:s.variant,"model-value":s.value,autocorrect:"off",autocomplete:"off",spellcheck:"false",rows:"3",placeholder:s.placeholder,invalid:e.error!==void 0,onInput:u},null,8,["variant","model-value","placeholder","invalid"])),[[F]]):S("",!0),a.value.length?(d(),w("div",Hn,[(d(!0),w(H,null,fe(a.value,($,I)=>(d(),w("button",{key:I,class:"fieldStateAutocompleteOption",value:I,onFocusout:L,onFocusin:T,onClick:()=>f($.text)},[m("span",Qn,z($.text),1),m("span",Zn,z($.type),1)],40,Xn))),128))])):S("",!0)])}}}),ne=J(es,[["__scopeId","data-v-9e979551"]]),ts=Y({__name:"WdsTab",props:{disabled:{type:Boolean},selected:{type:Boolean}},emits:{click:()=>!0},setup(e){return(t,n)=>(d(),w("button",{class:Ve(["WdsTab",{"WdsTab--disabled":e.disabled,"WdsTab--selected":e.selected}]),type:"button",onClick:n[0]||(n[0]=o=>t.$emit("click"))},[Ye(t.$slots,"default",{},void 0,!0)],2))}}),ns=J(ts,[["__scopeId","data-v-333dd4cb"]]),ss={class:"WdsTabs"},os=Y({__name:"WdsTabs",props:rt({tabs:{type:Array,required:!0}},{modelValue:{type:String},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=ut(e,"modelValue");return(n,o)=>(d(),w("div",ss,[(d(!0),w(H,null,fe(e.tabs,s=>(d(),O(ns,{key:s.value,disabled:s.disabled,selected:s.value===t.value,onClick:i=>t.value=s.value},{default:D(()=>[X(z(s.label),1)]),_:2},1032,["disabled","selected","onClick"]))),128))]))}}),ge=J(os,[["__scopeId","data-v-a5ab221c"]]),Be=Object.freeze([{label:"Default",value:"default"},{label:"CSS",value:"css"},{label:"Pick",value:"pick"}]),ls=["data-automation-key"],as={key:0,class:"main"},is={key:0,class:"pickerContainer"},rs=Y({__name:"BuilderFieldsAlign",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},direction:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const t=W(j.core),n=W(j.builderManager),{setContentValue:o}=se(t,n),s=R(null),i=R(null),a=R(null),l=[{key:"start",label:"Left",match:v=>v=="start",default:"start",icon:"format_align_left"},{key:"center",label:"Center",match:v=>v=="center",default:"center",icon:"format_align_center"},{key:"end",label:"Right",match:v=>v=="end",default:"end",icon:"format_align_right"}],r=[{key:"start",label:"Top",match:v=>v=="start",default:"start",icon:"vertical_align_top"},{key:"center",label:"Center",match:v=>v=="center",default:"center",icon:"vertical_align_center"},{key:"end",label:"Bottom",match:v=>v=="end",default:"end",icon:"vertical_align_bottom"}],f={pick:i,css:a,default:null},c=e,{componentId:h,fieldKey:p,direction:u}=ve(c),k=M(()=>t.getComponentById(h.value)),b=M(()=>u.value=="vertical"?r:u.value=="horizontal"?l:r),L=M(()=>b.value.map(v=>({value:v.key,label:v.label,icon:v.icon}))),T=M(()=>{const v=k.value.content[p.value];for(const g in b.value)if(v&&b.value[g].match(v))return b.value[g].key;return null}),C=M(()=>{const v=k.value.content[p.value];return v||""}),F=R((()=>{if(!C.value)return"default";for(const v in b.value)if(b.value[v].match(C.value))return"pick";return"css"})()),$=()=>{var g;const v=(g=f[F.value])==null?void 0:g.value;v&&(v.focus(),typeof v.selectionStart=="number"&&(v.selectionStart=v.selectionEnd=v.value.length))},I=async v=>{F.value!=v&&(F.value=v,await ue(),$(),v==="default"&&o(k.value.id,p.value,void 0))},x=v=>{for(const g in b.value)if(b.value[g].key==v){const _=b.value[g].default;k.value.content[p.value]=_,o(k.value.id,p.value,_)}},A=v=>{o(k.value.id,p.value,v.target.value)};return ye(()=>{s.value.addEventListener("focus",$)}),Ee(()=>{s.value.removeEventListener("focus",$)}),(v,g)=>(d(),w("div",{ref_key:"rootEl",ref:s,class:"BuilderFieldsAlign",tabindex:"-1","data-automation-key":c.fieldKey},[V(ge,{tabs:y(Be),"model-value":F.value,"onUpdate:modelValue":I},null,8,["tabs","model-value"]),F.value=="pick"||F.value=="css"?(d(),w("div",as,[F.value=="pick"?(d(),w("div",is,[V(Ge,{"model-value":T.value,options:L.value,"onUpdate:modelValue":x},null,8,["model-value","options"])])):S("",!0),F.value=="css"?(d(),O(ne,{key:1,ref_key:"freehandInputEl",ref:a,value:k.value.content[y(p)],error:e.error,onInput:A},null,8,["value","error"])):S("",!0)])):S("",!0)],8,ls))}}),it=J(rs,[["__scopeId","data-v-bcbde731"]]),us=["data-automation-key"],cs={key:0,class:"main"},ds={key:0,class:"pickerContainer"},vs=["value"],ps=Y({__name:"BuilderFieldsColor",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const t=W(j.core),n=W(j.builderManager),{setContentValue:o}=se(t,n),s=R(null),i=R(null),a=R(null),l={pick:i,css:a,default:null},r=e,{componentId:f,fieldKey:c}=ve(r),h=M(()=>t.getComponentById(f.value)),u=R((()=>{const T=h.value.content[c.value];return T?/#[A-Fa-f0-9]{6}/.test(T)?"pick":"css":"default"})()),k=()=>{var C;const T=(C=l[u.value])==null?void 0:C.value;T&&(T.focus(),typeof T.selectionStart=="number"&&(T.selectionStart=T.selectionEnd=T.value.length))},b=async T=>{u.value!=T&&(u.value=T,await ue(),k(),T==="default"&&o(h.value.id,c.value,void 0))},L=T=>o(h.value.id,c.value,T.target.value);return ye(()=>{s.value.addEventListener("focus",k)}),Ee(()=>{s.value.removeEventListener("focus",k)}),(T,C)=>(d(),w("div",{ref_key:"rootEl",ref:s,class:"BuilderFieldsColor",tabindex:"-1","data-automation-key":y(c)},[V(ge,{tabs:y(Be),"model-value":u.value,"onUpdate:modelValue":b},null,8,["tabs","model-value"]),u.value=="pick"||u.value=="css"?(d(),w("div",cs,[u.value=="pick"?(d(),w("div",ds,[m("input",{ref_key:"pickerEl",ref:i,type:"color",value:h.value.content[y(c)],onInput:L},null,40,vs)])):S("",!0),u.value=="css"?(d(),O(ne,{key:1,ref_key:"freehandInputEl",ref:a,value:h.value.content[y(c)],error:e.error,onInput:L},null,8,["value","error"])):S("",!0)])):S("",!0)],8,us))}}),fs=J(ps,[["__scopeId","data-v-0e275621"]]),hs=Y({__name:"BuilderFieldsObject",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const t=W(j.core),n=W(j.builderManager),{setContentValue:o}=se(t,n),s=e,{componentId:i,fieldKey:a}=ve(s),l=M(()=>t.getComponentById(i.value)),r=c=>{o(l.value.id,a.value,c)},f=M(()=>{const{type:c}=l.value;return t.getComponentDefinition(c).fields[a.value]});return(c,h)=>{var p;return d(),O(ne,{class:"BuilderFieldsObject","data-automation-key":s.fieldKey,multiline:"",variant:"code",value:l.value.content[y(a)],placeholder:(p=f.value)==null?void 0:p.default,error:e.error,onInput:h[0]||(h[0]=u=>r(u.target.value))},null,8,["data-automation-key","value","placeholder","error"])}}}),St=J(hs,[["__scopeId","data-v-7749ae31"]]),It=e=>(oe("data-v-7ecd53e1"),e=e(),le(),e),ms=["data-automation-key"],_s=["onClick"],ys=It(()=>m("i",{class:"material-symbols-outlined"},"delete",-1)),gs=[ys],bs={class:"formAdd"},ks=It(()=>m("i",{class:"material-symbols-outlined"},"add",-1)),Ss=Y({__name:"BuilderFieldsKeyValue",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},instancePath:{type:Array,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const t=W(j.core),n=W(j.builderManager),{setContentValue:o}=se(t,n),s=e,{componentId:i,fieldKey:a}=ve(s),l=M(()=>t.getComponentById(i.value)),r=R(null),f=R(null),c=R(null),h=R({}),p=R({key:"",value:""}),u=[{label:"Static List",value:"assisted"},{label:"JSON",value:"freehand"}],{getEvaluatedFields:k}=vt(t),b=M(()=>k(s.instancePath)[a.value].value),L=async F=>{c.value!=F&&(c.value=F,c.value=="assisted"&&T(),await ue())},T=()=>{h.value=b.value??{}},C=()=>{const{key:F,value:$}=p.value;F===""||$===""||(h.value={...h.value,[F]:$},o(l.value.id,a.value,JSON.stringify(h.value,null,2)),p.value={key:"",value:""},f.value.focus())},B=F=>{const $=h.value;if(delete $[F],h.value=$,Object.keys(h.value).length==0){o(l.value.id,a.value,void 0);return}o(l.value.id,a.value,JSON.stringify(h.value,null,2))};return Ce(()=>{var F;return(F=l.value)==null?void 0:F.content[a.value]},async()=>{!l.value||!b.value||(h.value=b.value)}),ye(async()=>{b.value?(h.value=b.value,L("assisted")):L("freehand")}),(F,$)=>(d(),w("div",{ref_key:"rootEl",ref:r,class:"BuilderFieldsOptions",tabindex:"-1","data-automation-key":s.fieldKey},[V(ge,{class:"BuilderFieldsOptions__tabs",tabs:u,"model-value":c.value,"onUpdate:modelValue":L},null,8,["model-value"]),c.value=="assisted"?(d(),w(H,{key:0},[m("div",{class:Ve(["staticList",{"staticList--invalid":e.error!==void 0}])},[(d(!0),w(H,null,fe(h.value,(I,x)=>(d(),w("div",{key:x,class:"entry"},[m("div",null,z(x)+" · "+z(I),1),m("button",{variant:"subtle",onClick:A=>B(x)},gs,8,_s)]))),128))],2),m("div",bs,[V(ne,{ref_key:"assistedKeyEl",ref:f,class:"inputKey",placeholder:"Type a key...",value:p.value.key,"onUpdate:value":$[0]||($[0]=I=>p.value.key=I),onKeydown:Ze(C,["enter"])},null,8,["value"]),V(ne,{class:"inputValue",placeholder:"Type a value...",value:p.value.value,"onUpdate:value":$[1]||($[1]=I=>p.value.value=I),onKeydown:Ze(C,["enter"])},null,8,["value"]),m("button",{onClick:C},[ks,X("Add ")])])],64)):S("",!0),c.value=="freehand"?(d(),O(St,{key:1,"component-id":l.value.id,"field-key":y(a),error:e.error},null,8,["component-id","field-key","error"])):S("",!0)],8,ms))}}),Is=J(Ss,[["__scopeId","data-v-7ecd53e1"]]),Q=e=>(oe("data-v-8b326b4b"),e=e(),le(),e),$s=["data-automation-key"],ws={key:0,class:"main"},xs={key:0,class:"pickerContainer"},Cs={class:"BuilderFieldsPadding__options"},Es=Q(()=>m("i",null,"All",-1)),Bs=Q(()=>m("div",null,"px",-1)),Ms=Q(()=>m("i",null,"X",-1)),As=Q(()=>m("div",null,"px",-1)),Fs=Q(()=>m("i",null,"Y",-1)),Ts=Q(()=>m("div",null,"px",-1)),Os=Q(()=>m("i",null,"Left",-1)),Vs=Q(()=>m("div",null,"px",-1)),Ps=Q(()=>m("i",null,"Right",-1)),Rs=Q(()=>m("div",null,"px",-1)),Ls=Q(()=>m("i",null,"Top",-1)),Ws=Q(()=>m("div",null,"px",-1)),js=Q(()=>m("i",null,"Bottom",-1)),Ds=Q(()=>m("div",null,"px",-1)),Ns=Y({__name:"BuilderFieldsPadding",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const t=W(j.core),n=W(j.builderManager),{setContentValue:o}=se(t,n),s=R(null),i=R(null),a=R(null),l=R(null),r=[{key:"all_sides",label:"All sides",match:g=>g.split(" ").length==1&&g.endsWith("px"),default:()=>C.value?C.value[0]:"0px"},{key:"XY sides",label:"XY sides",match:g=>g.split(" ").length==2&&g.endsWith("px"),default:()=>C.value?C.value[2]+" "+C.value[0]:"0px 0px"},{key:"Per side",label:"Per side",match:g=>g.split(" ").length==4&&g.endsWith("px"),default:()=>C.value?[C.value[3],C.value[1],C.value[2],C.value[0]].join(" "):"0px 0px 0px 0px"}],f={pick:i,css:l,default:null},c=e,{componentId:h,fieldKey:p}=ve(c),u=M(()=>t.getComponentById(h.value)),k=M(()=>r.map(g=>({value:g.key,label:g.label,icon:"padding"}))),b=M(()=>{const g=u.value.content[p.value];for(const _ in r)if(g&&r[_].match(g))return r[_].key;return null}),L=M(()=>{const g=u.value.content[p.value];return g||""}),T=M(()=>{const g=C.value;return g?[g[0].substring(0,g[0].length-2),g[1].substring(0,g[1].length-2),g[2].substring(0,g[2].length-2),g[3].substring(0,g[3].length-2)]:["0","0","0","0"]}),C=M(()=>{const g=u.value.content[p.value];if(g){const _=g.split(" ");if(_.length==1&&_[0].endsWith("px"))return[_[0],_[0],_[0],_[0]];if(_.length==2&&_[0].endsWith("px")&&_[0].endsWith("px"))return[_[1],_[1],_[0],_[0]];if(_.length==4&&_[0].endsWith("px")&&_[1].endsWith("px")&&_[2].endsWith("px")&&_[3].endsWith("px"))return[_[3],_[1],_[0],_[2]]}else return null;return null}),F=R((()=>{if(!L.value)return"default";for(const g in r)if(r[g].match(L.value))return"pick";return"css"})()),$=()=>{var _;const g=(_=f[F.value])==null?void 0:_.value;g&&(g.focus(),typeof g.selectionStart=="number"&&(g.selectionStart=g.selectionEnd=g.value.length))},I=async g=>{F.value!=g&&(F.value=g,await ue(),$(),g==="default"&&o(u.value.id,p.value,void 0))},x=g=>{for(const _ in r)if(r[_].key==g){const E=r[_].default();u.value.content[p.value]=E,o(u.value.id,p.value,E)}ue(()=>{var _;(_=a.value)==null||_.focus()})},A=g=>{o(u.value.id,p.value,g.target.value)},v=(g,_,E)=>{const q=Number(g),N=u.value.content[p.value];if(_=="all_sides")o(u.value.id,p.value,q+"px");else if(_=="XY sides"){const U=N.split(" ");E=="x"?U[1]=q+"px":E=="y"&&(U[0]=q+"px"),o(u.value.id,p.value,U.join(" "))}else if(_=="Per side"){const U=N.split(" ");E=="top"?U[0]=q+"px":E=="right"?U[1]=q+"px":E=="bottom"?U[2]=q+"px":E=="left"&&(U[3]=q+"px"),o(u.value.id,p.value,U.join(" "))}};return ye(()=>{s.value.addEventListener("focus",$)}),Ee(()=>{s.value.removeEventListener("focus",$)}),(g,_)=>(d(),w("div",{ref_key:"rootEl",ref:s,class:"BuilderFieldsPadding",tabindex:"-1","data-automation-key":c.fieldKey},[V(ge,{tabs:y(Be),"model-value":F.value,"onUpdate:modelValue":I},null,8,["tabs","model-value"]),F.value=="pick"||F.value=="css"?(d(),w("div",ws,[F.value=="pick"?(d(),w("div",xs,[V(Ge,{"model-value":b.value,options:k.value,"onUpdate:modelValue":x},null,8,["model-value","options"]),m("div",Cs,[b.value=="all_sides"?(d(),w(H,{key:0},[Es,V(ie,{ref_key:"fixedEl",ref:a,type:"number","model-value":T.value[0],"onUpdate:modelValue":_[0]||(_[0]=E=>v(E,b.value))},null,8,["model-value"]),Bs],64)):S("",!0),b.value=="XY sides"?(d(),w(H,{key:1},[Ms,V(ie,{type:"number","model-value":T.value[0],"onUpdate:modelValue":_[1]||(_[1]=E=>v(E,b.value,"x"))},null,8,["model-value"]),As,Fs,V(ie,{type:"number","model-value":T.value[2],"onUpdate:modelValue":_[2]||(_[2]=E=>v(E,b.value,"y"))},null,8,["model-value"]),Ts],64)):S("",!0),b.value=="Per side"?(d(),w(H,{key:2},[Os,V(ie,{type:"number","model-value":T.value[0],"onUpdate:modelValue":_[3]||(_[3]=E=>v(E,b.value,"left"))},null,8,["model-value"]),Vs,Ps,V(ie,{type:"number","model-value":T.value[1],"onUpdate:modelValue":_[4]||(_[4]=E=>v(E,b.value,"right"))},null,8,["model-value"]),Rs,Ls,V(ie,{type:"number","model-value":T.value[2],"onUpdate:modelValue":_[5]||(_[5]=E=>v(E,b.value,"top"))},null,8,["model-value"]),Ws,js,V(ie,{type:"number","model-value":T.value[3],"onUpdate:modelValue":_[6]||(_[6]=E=>v(E,b.value,"bottom"))},null,8,["model-value"]),Ds],64)):S("",!0)])])):S("",!0),F.value=="css"?(d(),O(ne,{key:1,ref_key:"freehandInputEl",ref:l,value:u.value.content[y(p)],error:e.error,onInput:A},null,8,["value","error"])):S("",!0)])):S("",!0)],8,$s))}}),Us=J(Ns,[["__scopeId","data-v-8b326b4b"]]),Me=e=>(oe("data-v-950533dc"),e=e(),le(),e),qs=["data-automation-key"],zs={key:0,class:"main"},Ks={key:0,class:"pickerContainer"},Ys={class:"param"},Js={class:"header"},Gs=Me(()=>m("div",{class:"name"},"Offset X",-1)),Hs=["value"],Xs={class:"param"},Qs={class:"header"},Zs=Me(()=>m("div",{class:"name"},"Offset Y",-1)),eo=["value"],to={class:"param"},no={class:"header"},so=Me(()=>m("div",{class:"name"},"Blur radius",-1)),oo=["value"],lo={class:"param"},ao={class:"header"},io=Me(()=>m("div",{class:"name"},"Spread radius",-1)),ro=["value"],uo={class:"param"},co=Me(()=>m("div",{class:"header"},[m("div",{class:"name"},"Color")],-1)),vo=["value"],po=Y({__name:"BuilderFieldsShadow",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const t=W(j.core),n=W(j.builderManager),{setContentValue:o}=se(t,n),s=R(null),i=R(null),a=R(null),l=R(null),r=R(null),f=R(null),c=R(null),h={pick:a,css:i,default:null},p=e,{componentId:u,fieldKey:k}=ve(p),b=M(()=>t.getComponentById(u.value)),L=/^(?<offsetX>[0-9]+)px (?<offsetY>[0-9]+)px (?<blurRadius>[0-9]+)px (?<spreadRadius>[0-9-]+)px (?<color>#[A-Fa-f0-9]{6})$/,C=R((()=>{const A=b.value.content[k.value];return A?L.test(A)?"pick":"css":"default"})()),B=()=>{var v;const A=(v=h[C.value])==null?void 0:v.value;A&&(A.focus(),typeof A.selectionStart=="number"&&(A.selectionStart=A.selectionEnd=A.value.length))},F=async A=>{C.value!=A&&(C.value=A,await ue(),B(),A==="default"&&o(b.value.id,k.value,void 0))},$=()=>{const A=a.value.value,v=l.value.value,g=r.value.value,_=f.value.value,E=c.value.value,q=`${A}px ${v}px ${g}px ${_}px ${E}`;o(b.value.id,k.value,q)},I=A=>{o(b.value.id,k.value,A.target.value)},x=M(()=>{var g;const A=b.value.content[k.value];return(g=A==null?void 0:A.match(L))==null?void 0:g.groups});return ye(()=>{s.value.addEventListener("focus",B)}),Ee(()=>{s.value.removeEventListener("focus",B)}),(A,v)=>{var g,_,E,q,N,U,ae,Ie,$e,we,xe,Z,K;return d(),w("div",{ref_key:"rootEl",ref:s,class:"BuilderFieldsShadow",tabindex:"-1","data-automation-key":p.fieldKey},[V(ge,{tabs:y(Be),"model-value":C.value,"onUpdate:modelValue":F},null,8,["tabs","model-value"]),C.value=="pick"||C.value=="css"?(d(),w("div",zs,[C.value=="pick"?(d(),w("div",Ks,[m("div",Ys,[m("div",Js,[Gs,ke(m("div",{class:"value"},z((g=x.value)==null?void 0:g.offsetX)+"px ",513),[[Ae,(_=x.value)==null?void 0:_.offsetX]])]),m("input",{ref_key:"paramOffsetXEl",ref:a,type:"range",min:"0",max:"32",value:(E=x.value)==null?void 0:E.offsetX,onInput:$},null,40,Hs)]),m("div",Xs,[m("div",Qs,[Zs,ke(m("div",{class:"value"},z((q=x.value)==null?void 0:q.offsetY)+"px ",513),[[Ae,(N=x.value)==null?void 0:N.offsetY]])]),m("input",{ref_key:"paramOffsetYEl",ref:l,type:"range",min:"0",max:"32",value:(U=x.value)==null?void 0:U.offsetY,onInput:$},null,40,eo)]),m("div",to,[m("div",no,[so,ke(m("div",{class:"value"},z((ae=x.value)==null?void 0:ae.blurRadius)+"px ",513),[[Ae,(Ie=x.value)==null?void 0:Ie.blurRadius]])]),m("input",{ref_key:"paramBlurRadiusEl",ref:r,type:"range",min:"0",max:"32",value:($e=x.value)==null?void 0:$e.blurRadius,onInput:$},null,40,oo)]),m("div",lo,[m("div",ao,[io,ke(m("div",{class:"value"},z((we=x.value)==null?void 0:we.spreadRadius)+"px ",513),[[Ae,(xe=x.value)==null?void 0:xe.spreadRadius]])]),m("input",{ref_key:"paramSpreadRadiusEl",ref:f,type:"range",min:"-16",max:"32",value:(Z=x.value)==null?void 0:Z.spreadRadius,onInput:$},null,40,ro)]),m("div",uo,[co,m("input",{ref_key:"paramColorEl",ref:c,type:"color",value:(K=x.value)==null?void 0:K.color,onInput:$},null,40,vo)])])):S("",!0),C.value=="css"?(d(),O(ne,{key:1,ref_key:"freehandInputEl",ref:i,value:b.value.content[y(k)],error:e.error,onInput:I},null,8,["value","error"])):S("",!0)])):S("",!0)],8,qs)}}}),fo=J(po,[["__scopeId","data-v-950533dc"]]),ho=["data-automation-key"],mo=Y({__name:"BuilderFieldsText",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const t=W(j.core),n=W(j.builderManager),{setContentValue:o}=se(t,n),s=e,{componentId:i,fieldKey:a}=ve(s),l=M(()=>t.getComponentById(i.value)),r=M(()=>{const{type:p}=l.value;return t.getComponentDefinition(p).fields[a.value]}),f=M(()=>`${s.componentId}-${s.fieldKey}`),c=M(()=>{const p=r.value;return p.options?typeof p.options=="function"?p.options(t,i.value):p.options:{}}),h=p=>{o(l.value.id,a.value,p.target.value)};return(p,u)=>{var k,b;return d(),w("div",{class:"BuilderFieldsText","data-automation-key":s.fieldKey},[!r.value.control||r.value.control==y(et).Text?(d(),O(ne,{key:0,class:"content","input-id":f.value,value:l.value.content[y(a)],placeholder:(k=r.value)==null?void 0:k.default,options:c.value,error:e.error,onInput:h},null,8,["input-id","value","placeholder","options","error"])):r.value.control==y(et).Textarea?(d(),O(ne,{key:1,multiline:"",variant:"text",class:"content","input-id":f.value,value:l.value.content[y(a)],placeholder:(b=r.value)==null?void 0:b.default,error:e.error,onInput:h},null,8,["input-id","value","placeholder","error"])):S("",!0)],8,ho)}}}),Le=J(mo,[["__scopeId","data-v-221f60a7"]]),_o=e=>(oe("data-v-7dad36f9"),e=e(),le(),e),yo=["data-automation-key"],go={key:0,class:"main"},bo={key:0,class:"pickerContainer"},ko={key:0,class:"fixedContainer"},So=_o(()=>m("div",null,"px",-1)),Io=Y({__name:"BuilderFieldsWidth",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const t=W(j.core),n=W(j.builderManager),{setContentValue:o}=se(t,n),s=R(null),i=R(null),a=R(null),l=R(null),r=[{key:"fixed",label:"Fixed",match:v=>v.endsWith("px"),default:"160px"},{key:"fit-content",label:"Fit Content",match:v=>v=="fit-content",default:"fit-content"},{key:"full",label:"Full",match:v=>v=="100%",default:"100%"}],f={pick:i,css:l,default:null},c=e,{componentId:h,fieldKey:p}=ve(c),u=M(()=>t.getComponentById(h.value)),k=M(()=>r.map(v=>({value:v.key,label:v.label,icon:"width"}))),b=M(()=>{const v=u.value.content[p.value];for(const g in r)if(v&&r[g].match(v))return r[g].key;return null}),L=M(()=>{const v=u.value.content[p.value];return v||""}),T=M(()=>{const v=u.value.content[p.value];if(v){if(v.endsWith("px"))return v.substring(0,v.length-2)}else return null;return null}),B=R((()=>{if(!L.value)return"default";for(const v in r)if(r[v].match(L.value))return"pick";return"css"})()),F=()=>{var g;const v=(g=f[B.value])==null?void 0:g.value;v&&(v.focus(),typeof v.selectionStart=="number"&&(v.selectionStart=v.selectionEnd=v.value.length))},$=async v=>{B.value!=v&&(B.value=v,await ue(),F(),v==="default"&&o(u.value.id,p.value,void 0))},I=v=>{for(const g in r)if(r[g].key==v){const _=r[g].default;u.value.content[p.value]=_,o(u.value.id,p.value,_)}v=="fixed"&&ue(()=>{a.value.focus()})},x=v=>{o(u.value.id,p.value,v.target.value)},A=v=>{o(u.value.id,p.value,`${v}px`)};return ye(()=>{s.value.addEventListener("focus",F)}),Ee(()=>{s.value.removeEventListener("focus",F)}),(v,g)=>(d(),w("div",{ref_key:"rootEl",ref:s,class:"BuilderFieldsWidth",tabindex:"-1","data-automation-key":c.fieldKey},[V(ge,{tabs:y(Be),"model-value":B.value,"onUpdate:modelValue":$},null,8,["tabs","model-value"]),B.value=="pick"||B.value=="css"?(d(),w("div",go,[B.value=="pick"?(d(),w("div",bo,[V(Ge,{"model-value":b.value,options:k.value,"onUpdate:modelValue":I},null,8,["model-value","options"]),b.value=="fixed"?(d(),w("div",ko,[V(ie,{ref_key:"fixedEl",ref:a,type:"number","model-value":T.value,invalid:e.error!==void 0,"onUpdate:modelValue":A},null,8,["model-value","invalid"]),So])):S("",!0)])):S("",!0),B.value=="css"?(d(),O(ne,{key:1,ref_key:"freehandInputEl",ref:l,value:u.value.content[y(p)],onInput:x},null,8,["value"])):S("",!0)])):S("",!0)],8,yo))}}),$o=J(Io,[["__scopeId","data-v-7dad36f9"]]),wo=e=>(oe("data-v-ea030831"),e=e(),le(),e),xo={class:"WdsFieldWrapper colorTransformer"},Co={key:0,class:"WdsFieldWrapper__title"},Eo={key:0,class:"WdsFieldWrapper__title__label"},Bo={key:0,class:"WdsFieldWrapper__title__label__unit"},Mo=wo(()=>m("i",{class:"material-symbols-outlined"},"help",-1)),Ao={class:"WdsFieldWrapper__slot"},Fo={key:1,class:"WdsFieldWrapper__error"},To={key:2,class:"WdsFieldWrapper__hint"},Oo=Y({__name:"WdsFieldWrapper",props:{label:{type:String,required:!1,default:void 0},unit:{type:String,required:!1,default:void 0},hint:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0},helpButton:{type:[String,Boolean],required:!1,default:void 0}},emits:{helpClick:()=>!0},setup(e){return(t,n)=>(d(),w("div",xo,[e.label||e.helpButton?(d(),w("div",Co,[e.label?(d(),w("label",Eo,[X(z(e.label),1),e.unit?(d(),w("span",Bo," : "+z(e.unit),1)):S("",!0)])):S("",!0),e.helpButton?(d(),O(G,{key:1,class:"WdsFieldWrapper__title__help",variant:"neutral",size:"smallIcon","data-writer-tooltip":typeof e.helpButton=="string"?e.helpButton:void 0,onClick:n[0]||(n[0]=o=>t.$emit("helpClick"))},{default:D(()=>[Mo]),_:1},8,["data-writer-tooltip"])):S("",!0)])):S("",!0),m("div",Ao,[Ye(t.$slots,"default",{},void 0,!0)]),e.error?(d(),w("p",Fo,z(e.error),1)):S("",!0),e.hint?(d(),w("p",To,z(e.hint),1)):S("",!0)]))}}),_e=J(Oo,[["__scopeId","data-v-ea030831"]]),Pe=e=>(oe("data-v-08f79717"),e=e(),le(),e),Vo=["data-automation-key"],Po={class:"tools"},Ro=["onClick"],Lo={class:"toolName"},Wo=Pe(()=>m("i",{class:"material-symbols-outlined"},"delete",-1)),jo=Pe(()=>m("i",{class:"material-symbols-outlined"},"add",-1)),Do={class:"addToolForm"},No=Pe(()=>m("option",{value:"function"},"Function",-1)),Uo=Pe(()=>m("option",{value:"graph"},"Knowledge graph",-1)),qo={class:"addToolFormActions"},zo=Y({__name:"BuilderFieldsTools",props:{componentId:{},fieldKey:{}},setup(e){const t=ze(()=>Ke(()=>import("./BuilderEmbeddedCodeEditor-BPXNlHcT.js").then($=>$.a),__vite__mapDeps([4,1,2,5]),import.meta.url)),n=W(j.core),o=W(j.builderManager),{setContentValue:s}=se(n,o),a={isShown:!1,type:"function",name:"new_tool",code:`
{
	"description": "Gets info for an employee, given an employee id",
    "parameters": {
      "id": {"type": "string", "description": "Id of the employee"}
    }
}
`.trim(),graphIds:"6029b226-1ee0-4239-a1b0-cdeebfa3ad5a"},l=R(a),r=e,{componentId:f,fieldKey:c}=ve(r),h=M(()=>n.getComponentById(f.value)),p=M(()=>{let $={};try{$=JSON.parse(h.value.content[c.value])}catch{$={}}return $});function u(){l.value={...a,isShown:!0}}function k(){const{type:$,code:I,graphIds:x}=l.value;if($=="function")return{...JSON.parse(I),type:$};if($=="graph"){const A=x.split(",").map(v=>v.trim());return{type:$,graph_ids:A}}throw"Unexpected tool type."}function b($){let I=[];const{originalName:x,name:A}=$;return A||I.push("The name cannot be empty."),Object.keys(p.value).includes(A)&&!(x||x==A)&&I.push("An existing tool with the specified name already exists."),I}function L(){const $=b(l.value);if($.length>0){$.forEach(alert);return}let I;try{I=k()}catch{alert("Incorrect tool definition");return}const x=JSON.stringify({...p.value,...l.value.originalName?{[l.value.originalName]:void 0}:{},[l.value.name]:I});s(h.value.id,c.value,x),l.value.isShown=!1}function T($,I){var A;const{type:x}=I;if(x=="function")return{isShown:!0,type:"function",originalName:$,name:$,graphIds:"",code:JSON.stringify(I,void 0,2)};if(x=="graph")return{isShown:!0,type:"graph",originalName:$,name:$,graphIds:(A=I.graph_ids)==null?void 0:A.join(","),code:""};throw"Unexpected tool type;"}function C($){var x;const I=(x=p.value)==null?void 0:x[$];I&&(l.value=T($,I))}function B($){const I=JSON.stringify({...p.value,[$]:void 0});s(h.value.id,c.value,I)}const F={desc:"Close",fn:()=>{l.value.isShown=!1}};return($,I)=>(d(),w("div",{class:"BuilderFieldsTools colorTransformer","data-automation-key":r.fieldKey},[m("div",Po,[(d(!0),w(H,null,fe(p.value,(x,A)=>(d(),w("div",{key:A,class:"tool",onClick:v=>C(A)},[m("div",Lo,z(A),1),V(G,{variant:"primary",size:"small",class:"delete",onClick:Et(v=>B(A),["stop"])},{default:D(()=>[Wo]),_:2},1032,["onClick"])],8,Ro))),128))]),V(G,{size:"small",onClick:u},{default:D(()=>[jo,X(" Add tool")]),_:1}),l.value.isShown?(d(),O(Je,{key:0,"close-action":F,icon:"add","modal-title":"Add tool"},{default:D(()=>[m("div",Do,[V(_e,{label:"Tool type"},{default:D(()=>[V(Bt,{modelValue:l.value.type,"onUpdate:modelValue":I[0]||(I[0]=x=>l.value.type=x)},{default:D(()=>[No,Uo]),_:1},8,["modelValue"])]),_:1}),V(_e,{label:"Tool name"},{default:D(()=>[V(ie,{modelValue:l.value.name,"onUpdate:modelValue":I[1]||(I[1]=x=>l.value.name=x)},null,8,["modelValue"])]),_:1}),l.value.type=="function"?(d(),O(_e,{key:0,"frame-slot":!0,label:"Function tool definition"},{default:D(()=>[V(y(t),{modelValue:l.value.code,"onUpdate:modelValue":I[2]||(I[2]=x=>l.value.code=x),variant:"minimal",language:"json"},null,8,["modelValue"])]),_:1})):S("",!0),l.value.type=="graph"?(d(),O(_e,{key:1,label:"Graph id(s)",hint:"Specify the id of the knowledge graph you want to use. If multiple, separate the ids using commas."},{default:D(()=>[V(dt,{modelValue:l.value.graphIds,"onUpdate:modelValue":I[3]||(I[3]=x=>l.value.graphIds=x)},null,8,["modelValue"])]),_:1})):S("",!0)]),m("div",qo,[V(G,{onClick:L},{default:D(()=>[X("Save")]),_:1})])]),_:1})):S("",!0)],8,Vo))}}),Ko=J(zo,[["__scopeId","data-v-08f79717"]]);function Yo(e,t){const{getEvaluatedFields:n}=vt(e),o=M(()=>{const{componentId:i}=t.value.at(-1),a=e.getComponentById(i);return a?e.getComponentDefinition(a.type).fields??{}:{}}),s=M(()=>n(t.value));return M(()=>Object.entries(o.value).reduce((i,[a,l])=>{const r=s.value[a].value;return i[a]=Jo(l,r),i},{}))}function Jo(e,t){let n=e.validator;if(n===void 0&&typeof e.options=="object"&&e.options!==null&&Object.keys(e.options).length>0&&(n=Mt(Object.keys(e.options))),n===void 0)return;const o=At(n);if(!(o(t)||o.errors===void 0))return Ho(o.errors)}function Go(e){var n;if(e.keyword==="format"&&Object.values(Ft).includes(e.params.format))return Tt[e.params.format].errorMessage;let t="";return e.instancePath&&(t+=`${e.instancePath} `),t+=e.message,Array.isArray((n=e.params)==null?void 0:n.allowedValues)&&(t+=`: ${e.params.allowedValues.join(", ")}`),t}function Ho(e){return e.map(Go).join(`
`)}const Xo={key:0,class:"BuilderSettingsProperties"},Qo={key:0,class:"BuilderSettingsProperties__category__title"},Zo=Y({__name:"BuilderSettingsProperties",setup(e){const t=W(j.core),n=W(j.builderManager),o=M(()=>{var c,h;return Lt((h=(c=n.firstSelectedItem)==null?void 0:c.value)==null?void 0:h.instancePath)}),s=M(()=>t.getComponentById(n.firstSelectedId.value)),i=M(()=>{const{type:c}=s.value;return t.getComponentDefinition(c)}),a=M(()=>{var c;return(c=i.value)==null?void 0:c.fields}),l=Yo(t,o),r=M(()=>[ce.General,ce.Style,ce.Tools].filter(c=>{var h;return(h=f.value[c])==null?void 0:h.length})),f=M(()=>{const c=Object.entries(a.value);return{[ce.General]:c.filter(([p,u])=>!u.category||u.category==ce.General),[ce.Style]:c.filter(([p,u])=>u.category==ce.Style),[ce.Tools]:c.filter(([p,u])=>u.category==ce.Tools)}});return(c,h)=>y(n).isSingleSelectionActive&&a.value?(d(),w("div",Xo,[(d(!0),w(H,null,fe(r.value,p=>(d(),w("div",{key:p,class:"BuilderSettingsProperties__category"},[f.value[p].length>0?(d(),w("h4",Qo,z(p),1)):S("",!0),(d(!0),w(H,null,fe(f.value[p],([u,k])=>(d(),w("div",{key:u,class:"BuilderSettingsProperties__category__field"},[V(_e,{label:p==="Tools"?void 0:k.name??u,hint:k.desc,unit:k.type,error:y(l)[u]},{default:D(()=>[k.type==y(te).Color?(d(),O(fs,{key:0,"field-key":u,"component-id":s.value.id,error:y(l)[u]},null,8,["field-key","component-id","error"])):S("",!0),k.type==y(te).Shadow?(d(),O(fo,{key:1,"field-key":u,"component-id":s.value.id,error:y(l)[u]},null,8,["field-key","component-id","error"])):S("",!0),k.type==y(te).KeyValue?(d(),O(Is,{key:2,"field-key":u,"component-id":s.value.id,"instance-path":o.value,error:y(l)[u]},null,8,["field-key","component-id","instance-path","error"])):S("",!0),k.type==y(te).Text?(d(),O(Le,{key:3,"field-key":u,"component-id":s.value.id,error:y(l)[u]},null,8,["field-key","component-id","error"])):S("",!0),k.type==y(te).Number?(d(),O(Le,{key:4,"field-key":u,"component-id":s.value.id,error:y(l)[u]},null,8,["field-key","component-id","error"])):S("",!0),k.type==y(te).IdKey?(d(),O(Le,{key:5,"field-key":u,"component-id":s.value.id,error:y(l)[u]},null,8,["field-key","component-id","error"])):S("",!0),k.type==y(te).Object?(d(),O(St,{key:6,"field-key":u,"component-id":s.value.id,error:y(l)[u]},null,8,["field-key","component-id","error"])):S("",!0),k.type==y(te).Width?(d(),O($o,{key:7,"field-key":u,"component-id":s.value.id,error:y(l)[u]},null,8,["field-key","component-id","error"])):S("",!0),k.type==y(te).HAlign?(d(),O(it,{key:8,direction:"horizontal","field-key":u,"component-id":s.value.id,error:y(l)[u]},null,8,["field-key","component-id","error"])):S("",!0),k.type==y(te).VAlign?(d(),O(it,{key:9,direction:"vertical","field-key":u,"component-id":s.value.id,error:y(l)[u]},null,8,["field-key","component-id","error"])):S("",!0),k.type==y(te).Padding?(d(),O(Us,{key:10,"field-key":u,"component-id":s.value.id,error:y(l)[u]},null,8,["field-key","component-id","error"])):S("",!0),k.type==y(te).Tools?(d(),O(Ko,{key:11,"field-key":u,"component-id":s.value.id},null,8,["field-key","component-id"])):S("",!0)]),_:2},1032,["label","hint","unit","error"])]))),128))]))),128))])):S("",!0)}}),el=J(Zo,[["__scopeId","data-v-2004f612"]]),tl={class:"BuilderSectionTitle"},nl={class:"material-symbols-outlined"},sl=Y({__name:"BuilderSectionTitle",props:{icon:{type:String,required:!0},label:{type:String,required:!0}},setup(e){return(t,n)=>(d(),w("div",tl,[m("i",nl,z(e.icon),1),m("h3",null,z(e.label),1)]))}}),$t=J(sl,[["__scopeId","data-v-731e03f5"]]),ol={key:0,class:"BuilderSettingsBinding"},ll={class:"main"},al='Links this component to a state element, in a two-way fashion. Reference the state element directly, i.e. use "my_var" instead of "@{my_var}".',il=Y({__name:"BuilderSettingsBinding",setup(e){const t=W(j.core),n=W(j.builderManager),{setBinding:o}=se(t,n),s=M(()=>t.getComponentById(n.firstSelectedId.value));return(i,a)=>y(n).isSingleSelectionActive?(d(),w("div",ol,[V($t,{icon:"link",label:"Binding"}),m("div",ll,[V(_e,{label:"State element",hint:al},{default:D(()=>{var l;return[V(ne,{type:"state",value:(l=s.value.binding)==null?void 0:l.stateRef,placeholder:"my_var",onInput:a[0]||(a[0]=r=>y(o)(s.value.id,r.target.value))},null,8,["value"])]}),_:1})])])):S("",!0)}}),rl=J(il,[["__scopeId","data-v-51a930b8"]]),ul=e=>(oe("data-v-23772341"),e=e(),le(),e),cl={key:0,class:"BuilderSettingsVisibility"},dl={class:"main"},vl={class:"flexRow"},pl=["checked"],fl=ul(()=>m("span",null,"Reverse",-1)),hl='Reference a state or context element that will evaluate to true or false. Reference the element directly, i.e. use "my_var" instead of "@{my_var}".',ml=Y({__name:"BuilderSettingsVisibility",setup(e){const t=[{label:"Yes",value:"yes"},{label:"No",value:"no"},{label:"Custom",value:"custom"}],n=M({get(){const l=a.value.visible;return(l==null?void 0:l.expression)==="custom"?"custom":l===void 0||l.expression===!0?"yes":"no"},set(l){var r,f;l==="custom"?i(a.value.id,"custom",(r=a.value.visible)==null?void 0:r.binding,(f=a.value.visible)==null?void 0:f.reversed):i(a.value.id,l==="yes")}}),o=W(j.core),s=W(j.builderManager),{setVisibleValue:i}=se(o,s),a=M(()=>o.getComponentById(s.firstSelectedId.value));return(l,r)=>y(s).isSingleSelectionActive?(d(),w("div",cl,[V($t,{icon:"visibility",label:"Visibility"}),m("div",dl,[V(ge,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=f=>n.value=f),tabs:t},null,8,["modelValue"]),typeof a.value.visible<"u"&&a.value.visible.expression==="custom"?(d(),O(_e,{key:0,hint:hl},{default:D(()=>[V(ne,{value:a.value.visible.binding,type:"state",placeholder:"my_visibility_state_value",onInput:r[1]||(r[1]=f=>y(i)(a.value.id,"custom",f.target.value,a.value.visible.reversed))},null,8,["value"]),m("div",vl,[m("input",{type:"checkbox",checked:a.value.visible.reversed,onInput:r[2]||(r[2]=f=>y(i)(a.value.id,"custom",a.value.visible.binding,f.target.checked))},null,40,pl),fl])]),_:1})):S("",!0)])])):S("",!0)}}),_l=J(ml,[["__scopeId","data-v-23772341"]]),yl=["data-writer-tooltip"],gl=Y({__name:"BuilderCopyText",setup(e){const t=R("Copy to clipboard");function n(o){const s=o.target.textContent;navigator.clipboard.writeText(s),t.value="Copied!",setTimeout(()=>{t.value="Copy to clipboard"},1e3)}return(o,s)=>(d(),w("span",{class:"BuilderCopyText","data-writer-tooltip":t.value,onClick:n},[Ye(o.$slots,"default",{},void 0,!0)],8,yl))}}),bl=J(gl,[["__scopeId","data-v-46ba30f4"]]),Xe=e=>(oe("data-v-c27d3c5a"),e=e(),le(),e),kl={key:0,class:"BuilderSettingsAPICode"},Sl={class:"modalContents"},Il={class:"codeContainer"},$l={class:"codeContainer"},wl=Xe(()=>m("strong",null,"Note: For API calls to work, the --enable-jobs-api flag must be active.",-1)),xl=Xe(()=>m("i",{class:"material-symbols-outlined"}," code ",-1)),Cl=Xe(()=>m("i",{class:"material-symbols-outlined"}," code ",-1)),El=Y({__name:"BuilderSettingsAPICode",setup(e){const t=W(j.core),n=W(j.builderManager),o=M(()=>t.getComponentById(n.firstSelectedId.value)),s=M(()=>{var u;return((u=o.value)==null?void 0:u.type)==="workflows_workflow"}),i=M(()=>{var u;if(s.value)return(u=o.value.content)==null?void 0:u.key}),a=R(!1),l=R(""),r=R(""),f=R(!1),c={desc:"Close",fn:()=>{a.value=!1}};function h(){p(),a.value=!0}async function p(){const u=await t.hashMessage(`create_job_${i.value}`);if(f.value=!!u,!f.value)return;const k=window.location.origin+window.location.pathname;l.value=`
curl --location --request POST '${k}api/job/workflow/${i.value}' \\
--header 'Content-Type: application/json' \\
--header 'Authorization: Bearer ${u}' \\
--data '{
    "my_var": 1
}'`.trim(),r.value=`
curl --location '${k}api/job/JOB_ID' \\
--header 'Authorization: Bearer JOB_TOKEN'`.trim()}return(u,k)=>s.value?(d(),w("div",kl,[a.value?(d(),O(Je,{key:0,"close-action":c,icon:"code","modal-title":"API Code"},{default:D(()=>[m("div",Sl,[f.value?(d(),w(H,{key:0},[X(" The following call will create the job and provide you with a job ID and a job token. "),m("div",Il,[V(tt,{modelValue:l.value,"onUpdate:modelValue":k[0]||(k[0]=b=>l.value=b),class:"editor",variant:"minimal",language:"shell"},null,8,["modelValue"])]),X(" Using the job ID and token obtained in the previous call, check the status of the job. You can use the code below, after replacing JOB_ID and JOB_TOKEN for the right values. "),m("div",$l,[V(tt,{modelValue:r.value,"onUpdate:modelValue":k[1]||(k[1]=b=>r.value=b),class:"editor",variant:"minimal",language:"shell"},null,8,["modelValue"])]),wl],64)):(d(),w(H,{key:1},[X(" API code cannot be generated. Please make sure the environment variable WRITER_SECRET_KEY has been set up. ")],64))])]),_:1})):S("",!0),i.value?(d(),O(G,{key:1,variant:"tertiary",size:"small",onClick:h},{default:D(()=>[xl,X(" Call via API")]),_:1})):(d(),O(G,{key:2,disabled:!0,variant:"tertiary",size:"small","data-writer-tooltip":`You need to specify a workflow key before this workflow can be
				used in the UI or called via API.`},{default:D(()=>[Cl,X(" Call via API")]),_:1}))])):S("",!0)}}),Bl=J(El,[["__scopeId","data-v-c27d3c5a"]]),wt=e=>(oe("data-v-521c8e50"),e=e(),le(),e),Ml={class:"BuilderSettingsMain"},Al={key:0,class:"warning cmc-warning"},Fl=wt(()=>m("i",{class:"material-symbols-outlined"},"warning",-1)),Tl=wt(()=>m("span",null," This component is instantiated in code. All settings in this panel are read-only and cannot be edited. ",-1)),Ol=[Fl,Tl],Vl=["inert"],Pl={class:"sections debug"},Rl=Y({__name:"BuilderSettingsMain",setup(e){const t=ze({loader:()=>Ke(()=>import("./BuilderSettingsHandlers-D1rEV6W_.js"),__vite__mapDeps([6,4,1,2,5,7,8,9,10,11,12]),import.meta.url),loadingComponent:Rt}),n=W(j.core),o=W(j.builderManager),s=M(()=>n.getComponentById(o.firstSelectedId.value)),i=M(()=>s.value.isCodeManaged),a=M(()=>o.isSingleSelectionActive.value?!l.value.toolkit||l.value.toolkit=="core":!1),l=M(()=>{const{type:f}=s.value;return n.getComponentDefinition(f)});Ce(s,f=>{f||o.setSelection(null)});const r=M(()=>{var f;return Object.values(((f=l.value)==null?void 0:f.events)??{}).some(c=>c.bindable)});return(f,c)=>(d(),w("div",Ml,[i.value?(d(),w("div",Al,Ol)):S("",!0),m("div",{class:"sections",inert:i.value},[V(el),a.value?(d(),w(H,{key:0},[r.value?(d(),O(rl,{key:0})):S("",!0),V(y(t)),V(_l)],64)):S("",!0),V(Bl,null,{default:D(()=>[X("Execute via API")]),_:1})],8,Vl),m("div",Pl,[m("div",null,[X(" Component id: "),V(bl,null,{default:D(()=>[X(z(y(o).firstSelectedId.value),1)]),_:1})])])]))}}),Ll=J(Rl,[["__scopeId","data-v-521c8e50"]]),Wl={class:"BuilderSettingsMiniDocs markdown"},jl=Y({__name:"BuilderSettingsMiniDocs",props:{rawMiniDocs:{}},setup(e){const t=e,n=jt.parse(t.rawMiniDocs);return(o,s)=>{const i=ct("dompurify-html");return ke((d(),w("div",Wl,[X(z(y(n)),1)])),[[i,y(n)]])}}}),Dl=J(jl,[["__scopeId","data-v-1129160a"]]),Qe=e=>(oe("data-v-5f4ca1b6"),e=e(),le(),e),Nl={key:0,class:"collapser"},Ul=Qe(()=>m("i",{class:"material-symbols-outlined"},"settings",-1)),ql=Qe(()=>m("i",{class:"material-symbols-outlined"},"double_arrow",-1)),zl={key:1,class:"titleBar"},Kl=Qe(()=>m("i",{class:"material-symbols-outlined"},"info",-1)),Yl=["data-writer-tooltip"],Jl=Y({__name:"BuilderSettings",setup(e){Ot(h=>({"3154397d":y(n).getMode()=="workflows"?"72px":"20px"}));const t=W(j.core),n=W(j.builderManager),o=R(!1),s=M(()=>t.getComponentById(n.firstSelectedId.value)),i=M(()=>n.selectionStatus.value===Te.Multiple?!0:n.isSettingsBarCollapsed.value),a=M(()=>n.selection.value.length);function l(){n.isSettingsBarCollapsed.value=!n.isSettingsBarCollapsed.value}const r=M(()=>{const{type:h}=s.value;return t.getComponentDefinition(h)}),f=M(()=>{var h,p;return(p=(h=r.value)==null?void 0:h.docs)==null?void 0:p.trim()});Ce(s,h=>{h||n.setSelection(null)});const c=()=>{o.value=!o.value};return(h,p)=>y(n).selectionStatus.value!==y(Te).None?(d(),w("div",{key:0,class:Ve(["BuilderSettings",{"BuilderSettings--collapsed":i.value,"BuilderSettings--miniDocActive":o.value}])},[y(n).isSingleSelectionActive.value?(d(),w("div",Nl,[i.value?(d(),O(G,{key:0,class:"collapserButton",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Expand settings","data-automation-action":"expand-settings",onClick:l},{default:D(()=>[Ul]),_:1})):(d(),O(G,{key:1,class:"collapserButton",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Collapse settings","data-automation-action":"collapse-settings",onClick:l},{default:D(()=>[ql]),_:1}))])):S("",!0),y(n).isSingleSelectionActive?(d(),w("div",zl,[m("div",null,z(r.value.name),1),f.value?(d(),O(G,{key:0,inert:i.value,class:"collapserButton",size:"small",variant:"neutral","data-writer-tooltip-placement":"top","data-writer-tooltip":"Toggle mini docs",onClick:c},{default:D(()=>[Kl]),_:1},8,["inert"])):S("",!0)])):S("",!0),y(n).selectionStatus.value===y(Te).Multiple?(d(),w("div",{key:2,class:"BuilderSettings__selectionCount","data-writer-tooltip-placement":"left","data-writer-tooltip":`${a.value} components selected`},[m("p",null,z(a.value),1)],8,Yl)):S("",!0),o.value&&f.value&&!i.value?(d(),O(Dl,{key:3,class:"miniDocs","raw-mini-docs":f.value},null,8,["raw-mini-docs"])):S("",!0),V(en,{class:"actions"}),V(Ll,{inert:i.value,class:"main"},null,8,["inert"])],2)):S("",!0)}}),Gl=J(Jl,[["__scopeId","data-v-5f4ca1b6"]]),na=Object.freeze(Object.defineProperty({__proto__:null,default:Gl},Symbol.toStringTag,{value:"Module"}));export{Ge as B,_e as W,na as a};
